!function(u){function t(t){for(var n,i,e=t[0],r=t[1],o=0,s=[];o<e.length;o++)i=e[o],a[i]&&s.push(a[i][0]),a[i]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(u[n]=r[n]);for(f&&f(t);s.length;)s.shift()()}var i={},a={3:0};function c(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return u[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(o){var t,n=[],i=a[o];if(0!==i)if(i)n.push(i[2]);else{var e=new Promise(function(t,n){i=a[o]=[t,n]});n.push(i[2]=e);var r,s=document.createElement("script");s.charset="utf-8",s.timeout=120,c.nc&&s.setAttribute("nonce",c.nc),s.src=c.p+""+({}[t=o]||t)+"-bundle-f7ae3d03874eb4b167c1.js",r=function(t){s.onerror=s.onload=null,clearTimeout(u);var n=a[o];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),e=t&&t.target&&t.target.src,r=new Error("Loading chunk "+o+" failed.\n("+i+": "+e+")");r.type=i,r.request=e,n[1](r)}a[o]=void 0}};var u=setTimeout(function(){r({type:"timeout",target:s})},12e4);s.onerror=s.onload=r,document.head.appendChild(s)}return Promise.all(n)},c.m=u,c.c=i,c.d=function(t,n,i){c.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},c.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(n,t){if(1&t&&(n=c(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var i=Object.create(null);if(c.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var e in n)c.d(i,e,function(t){return n[t]}.bind(null,e));return i},c.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return c.d(n,"a",n),n},c.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},c.p="/__assets/",c.oe=function(t){throw console.error(t),t};var n=window.talkjsWebpackJsonp=window.talkjsWebpackJsonp||[],e=n.push.bind(n);n.push=t,n=n.slice();for(var r=0;r<n.length;r++)t(n[r]);var f=e;c(c.s=632)}({15:function(t,n,i){"use strict";i.d(n,"a",function(){return r});var e=function(){return(e=Object.assign||function(t){for(var n,i=1,e=arguments.length;i<e;i++)for(var r in n=arguments[i])Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}).apply(this,arguments)};var r=function(){function t(t,n){var i=n?e({},n.values,t.values):t.values;this.values=i,this.meta=t.meta,this.t=function(t,n){return void 0===n&&(n=void 0),n?function(t,n){for(var i in n)t=t.replace("$"+i,n[i]);return t}(i[t],n):i[t]}}return t.decide=function(t,n,i){void 0===n&&(n="en"),void 0===i&&(i="@@"),n=n.substring(0,2);var e=t[i=(i||"@@").substring(0,2)];if(e)return e;var r=t[n];return r||t.en},t}()},152:function(t,n,i){"use strict";function e(){var t=document.documentElement,n=document.body;return{width:t.clientWidth||n.clientWidth,height:window.innerHeight}}i.d(n,"a",function(){return e})},164:function(e,r,o){"use strict";var s;!function(t){function n(s,t,n){var r,u,a,c,f,h,l,d,v,O=0,p=[],b=0,g=!1,o=[],T=[],I=!1;if(r=(n=n||{}).encoding||"UTF8",(v=n.numRounds||1)!==parseInt(v,10)||v<1)throw Error("numRounds must a integer >= 1");if("SHA-1"!==s)throw Error("Chosen SHA variant is not supported");f=512,h=k,l=i,c=160,d=function(t){return t.slice()},a=E(t,r),u=j(s),this.setHMACKey=function(t,n,i){var e;if(!0===g)throw Error("HMAC key already set");if(!0===I)throw Error("Cannot set HMAC key after calling update");if(t=(n=E(n,r=(i||{}).encoding||"UTF8")(t)).binLen,n=n.value,i=(e=f>>>3)/4-1,e<t/8){for(n=l(n,t,0,j(s),c);n.length<=i;)n.push(0);n[i]&=4294967040}else if(t/8<e){for(;n.length<=i;)n.push(0);n[i]&=4294967040}for(t=0;t<=i;t+=1)o[t]=909522486^n[t],T[t]=1549556828^n[t];u=h(o,u),O=f,g=!0},this.update=function(t){var n,i,e,r=0,o=f>>>5;for(t=(n=a(t,p,b)).binLen,i=n.value,n=t>>>5,e=0;e<n;e+=o)r+f<=t&&(u=h(i.slice(e,e+o),u),r+=f);O+=r,p=i.slice(r>>>5),b=t%f,I=!0},this.getHash=function(t,n){var i,e,r,o;if(!0===g)throw Error("Cannot call getHash after setting HMAC key");switch(r=M(n),t){case"HEX":i=function(t){return m(t,c,r)};break;case"B64":i=function(t){return w(t,c,r)};break;case"BYTES":i=function(t){return y(t,c)};break;case"ARRAYBUFFER":try{e=new ArrayBuffer(0)}catch(t){throw Error("ARRAYBUFFER not supported by this environment")}i=function(t){return N(t,c)};break;default:throw Error("format must be HEX, B64, BYTES, or ARRAYBUFFER")}for(o=l(p.slice(),b,O,d(u),c),e=1;e<v;e+=1)o=l(o,c,0,j(s),c);return i(o)},this.getHMAC=function(t,n){var i,e,r,o;if(!1===g)throw Error("Cannot call getHMAC without first setting HMAC key");switch(r=M(n),t){case"HEX":i=function(t){return m(t,c,r)};break;case"B64":i=function(t){return w(t,c,r)};break;case"BYTES":i=function(t){return y(t,c)};break;case"ARRAYBUFFER":try{i=new ArrayBuffer(0)}catch(t){throw Error("ARRAYBUFFER not supported by this environment")}i=function(t){return N(t,c)};break;default:throw Error("outputFormat must be HEX, B64, BYTES, or ARRAYBUFFER")}return e=l(p.slice(),b,O,d(u),c),o=h(T,j(s)),i(o=l(e,c,f,o,c))}}function m(t,n,i){var e,r,o="";for(n/=8,e=0;e<n;e+=1)r=t[e>>>2]>>>8*(3+e%4*-1),o+="0123456789abcdef".charAt(r>>>4&15)+"0123456789abcdef".charAt(15&r);return i.outputUpper?o.toUpperCase():o}function w(t,n,i){var e,r,o,s="",u=n/8;for(e=0;e<u;e+=3)for(r=e+1<u?t[e+1>>>2]:0,o=e+2<u?t[e+2>>>2]:0,o=(t[e>>>2]>>>8*(3+e%4*-1)&255)<<16|(r>>>8*(3+(e+1)%4*-1)&255)<<8|o>>>8*(3+(e+2)%4*-1)&255,r=0;r<4;r+=1)s+=8*e+6*r<=n?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(o>>>6*(3-r)&63):i.b64Pad;return s}function y(t,n){var i,e,r="",o=n/8;for(i=0;i<o;i+=1)e=t[i>>>2]>>>8*(3+i%4*-1)&255,r+=String.fromCharCode(e);return r}function N(t,n){var i,e,r=n/8,o=new ArrayBuffer(r);for(e=new Uint8Array(o),i=0;i<r;i+=1)e[i]=t[i>>>2]>>>8*(3+i%4*-1)&255;return o}function M(t){var n={outputUpper:!1,b64Pad:"=",shakeLen:-1};if(t=t||{},n.outputUpper=t.outputUpper||!1,!0===t.hasOwnProperty("b64Pad")&&(n.b64Pad=t.b64Pad),"boolean"!=typeof n.outputUpper)throw Error("Invalid outputUpper formatting option");if("string"!=typeof n.b64Pad)throw Error("Invalid b64Pad formatting option");return n}function E(t,l){var n;switch(l){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(t){case"HEX":n=function(t,n,i){var e,r,o,s,u,a=t.length;if(0!=a%2)throw Error("String of HEX type must be in byte increments");for(n=n||[0],u=(i=i||0)>>>3,e=0;e<a;e+=2){if(r=parseInt(t.substr(e,2),16),isNaN(r))throw Error("String of HEX type contains invalid characters");for(o=(s=(e>>>1)+u)>>>2;n.length<=o;)n.push(0);n[o]|=r<<8*(3+s%4*-1)}return{value:n,binLen:4*a+i}};break;case"TEXT":n=function(t,n,i){var e,r,o,s,u,a,c,f,h=0;if(n=n||[0],u=(i=i||0)>>>3,"UTF8"===l)for(f=3,o=0;o<t.length;o+=1)for(r=[],(e=t.charCodeAt(o))<128?r.push(e):e<2048?(r.push(192|e>>>6),r.push(128|63&e)):e<55296||57344<=e?r.push(224|e>>>12,128|e>>>6&63,128|63&e):(o+=1,e=65536+((1023&e)<<10|1023&t.charCodeAt(o)),r.push(240|e>>>18,128|e>>>12&63,128|e>>>6&63,128|63&e)),s=0;s<r.length;s+=1){for(a=(c=h+u)>>>2;n.length<=a;)n.push(0);n[a]|=r[s]<<8*(f+c%4*-1),h+=1}else if("UTF16BE"===l||"UTF16LE"===l)for(f=2,r="UTF16LE"===l||"UTF16LE"!==l&&!1,o=0;o<t.length;o+=1){for(e=t.charCodeAt(o),!0===r&&(e=(s=255&e)<<8|e>>>8),a=(c=h+u)>>>2;n.length<=a;)n.push(0);n[a]|=e<<8*(f+c%4*-1),h+=2}return{value:n,binLen:8*h+i}};break;case"B64":n=function(t,n,i){var e,r,o,s,u,a,c,f=0;if(-1===t.search(/^[a-zA-Z0-9=+\/]+$/))throw Error("Invalid character in base-64 string");if(r=t.indexOf("="),t=t.replace(/\=/g,""),-1!==r&&r<t.length)throw Error("Invalid '=' found in base-64 string");for(n=n||[0],a=(i=i||0)>>>3,r=0;r<t.length;r+=4){for(u=t.substr(r,4),o=s=0;o<u.length;o+=1)s|=(e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(u[o]))<<18-6*o;for(o=0;o<u.length-1;o+=1){for(e=(c=f+a)>>>2;n.length<=e;)n.push(0);n[e]|=(s>>>16-8*o&255)<<8*(3+c%4*-1),f+=1}}return{value:n,binLen:8*f+i}};break;case"BYTES":n=function(t,n,i){var e,r,o,s,u;for(n=n||[0],o=(i=i||0)>>>3,r=0;r<t.length;r+=1)e=t.charCodeAt(r),s=(u=r+o)>>>2,n.length<=s&&n.push(0),n[s]|=e<<8*(3+u%4*-1);return{value:n,binLen:8*t.length+i}};break;case"ARRAYBUFFER":try{n=new ArrayBuffer(0)}catch(t){throw Error("ARRAYBUFFER not supported by this environment")}n=function(t,n,i){var e,r,o,s,u;for(n=n||[0],r=(i=i||0)>>>3,u=new Uint8Array(t),e=0;e<t.byteLength;e+=1)o=(s=e+r)>>>2,n.length<=o&&n.push(0),n[o]|=u[e]<<8*(3+s%4*-1);return{value:n,binLen:8*t.byteLength+i}};break;default:throw Error("format must be HEX, TEXT, B64, BYTES, or ARRAYBUFFER")}return n}function f(t,n){return t<<n|t>>>32-n}function h(t,n){var i=(65535&t)+(65535&n);return((t>>>16)+(n>>>16)+(i>>>16)&65535)<<16|65535&i}function l(t,n,i,e,r){var o=(65535&t)+(65535&n)+(65535&i)+(65535&e)+(65535&r);return((t>>>16)+(n>>>16)+(i>>>16)+(e>>>16)+(r>>>16)+(o>>>16)&65535)<<16|65535&o}function j(t){if("SHA-1"!==t)throw Error("No SHA variants supported");return[1732584193,4023233417,2562383102,271733878,3285377520]}function k(t,n){var i,e,r,o,s,u,a,c=[];for(i=n[0],e=n[1],r=n[2],o=n[3],s=n[4],a=0;a<80;a+=1)c[a]=a<16?t[a]:f(c[a-3]^c[a-8]^c[a-14]^c[a-16],1),u=a<20?l(f(i,5),e&r^~e&o,s,1518500249,c[a]):a<40?l(f(i,5),e^r^o,s,1859775393,c[a]):a<60?l(f(i,5),e&r^e&o^r&o,s,2400959708,c[a]):l(f(i,5),e^r^o,s,3395469782,c[a]),s=o,o=r,r=f(e,30),e=i,i=u;return n[0]=h(i,n[0]),n[1]=h(e,n[1]),n[2]=h(r,n[2]),n[3]=h(o,n[3]),n[4]=h(s,n[4]),n}function i(t,n,i,e){var r;for(r=15+(n+65>>>9<<4);t.length<=r;)t.push(0);for(t[n>>>5]|=128<<24-n%32,n+=i,t[r]=4294967295&n,t[r-1]=n/4294967296|0,n=t.length,r=0;r<n;r+=16)e=k(t.slice(r,r+16),e);return e}void 0===(s=function(){return n}.call(r,o,r,e))||(e.exports=s)}()},165:function(t,n){
/**@license MIT-promiscuous-©Ruben Verborgh*/
!function(f,h){function l(t,n){return(typeof n)[0]==t}function d(a,c){return(c=function i(e,r,o,s,u,t){if(s=i.q,e!=l)return d(function(t,n){s.push({p:this,r:t,j:n,1:e,0:r})});if(o&&l(f,o)|l(h,o))try{u=o.then}catch(t){r=0,o=t}if(l(f,u)){function n(n){return function(t){u&&(u=0,i(l,n,t))}}try{u.call(o,n(1),r=n(0))}catch(t){r(t)}}else for(c=function(i,t){return l(f,i=r?i:t)?d(function(t,n){v(this,t,n,o,i)}):a},t=0;t<s.length;)u=s[t++],l(f,e=u[r])?v(u.p,u.r,u.j,o,e):(r?u.r:u.j)(o)}).q=[],a.call(a={then:function(t,n){return c(t,n)},catch:function(t){return c(0,t)}},function(t){c(l,1,t)},function(t){c(l,0,t)}),a}function v(t,n,i,e,r){setTimeout(function(){try{r=(e=r(e))&&l(h,e)|l(f,e)&&e.then,l(f,r)?e==t?i(TypeError()):r.call(e,n,i):n(e)}catch(t){i(t)}})}function s(n){return d(function(t){t(n)})}(t.exports=d).resolve=s,d.reject=function(i){return d(function(t,n){n(i)})},d.all=function(t){return d(function(i,e,r,o){o=[],r=t.length||i(o),t.map(function(t,n){s(t).then(function(t){o[n]=t,--r||i(o)},e)})})},d.race=function(t){return d(function(n,i){t.map(function(t){s(t).then(n,i)})})}}("f","o")},208:function(t,n,i){"use strict";function e(){var t="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",n=0,i=[],e=(new Date).getTime(),r=e===n;n=e;for(var o=new Array(8),s=7;0<=s;s--)o[s]=t.charAt(e%64),e=Math.floor(e/64);if(0!==e)throw new Error("We should have converted the entire timestamp.");var u=o.join("");if(r){for(s=11;0<=s&&63===i[s];s--)i[s]=0;i[s]++}else for(var s=0;s<12;s++)i[s]=Math.floor(64*Math.random());for(s=0;s<12;s++)u+=t.charAt(i[s]);if(20!=u.length)throw new Error("Length should be 20.");return u}i.d(n,"a",function(){return e})},209:function(t,n,i){"use strict";var r=i(82),o=window.WebSocket,e=function(){function t(t,n,i,e){this.u=t+"/socket",this.O=null,this.T=n,this.I=i,this.w=e,this.y={}}return t.prototype.connect=function(t){var n=this,i={appId:this.T,origin:this.I,sessionId:this.w,boken:t};try{var e=!0;this.O=new r.Socket(this.u,{params:i,transport:o}),this.O.onOpen(function(){return e=!1}),this.O.onError(function(){var t=n.O;e&&t.transport===o&&(t.disconnect(),t.transport=r.LongPoll,t.connect())}),this.O.connect()}catch(t){if("SecurityError"!==t.message)throw t;this.O=new r.Socket(this.u,{params:i,transport:r.LongPoll}),this.O.connect()}},t.prototype.disconnect=function(){this.O&&(this.N(),this.M())},t.prototype.N=function(){for(var t=0,n=Object.keys(this.y);t<n.length;t++){var i=n[t];this.y[i].phoenixChannel.leave()}this.y={}},t.prototype.M=function(){this.O&&(this.O.disconnect(void 0,"1000"),this.O.reconnectTimer.reset(),clearInterval(this.O.heartbeatTimer))},t.prototype.getOrJoin=function(t,n){var i=void 0===n?{}:n,e=i.initialData,r=void 0===e?{}:e,o=i.onRejoin,s=void 0===o?{}:o;if(!this.O)throw new Error("[TalkJS] Socket not connected");var u=t+":"+this.T,a=this.y[u];return a||(a=new c(this.O,u,{initialData:r,onRejoin:s}),this.y[u]=a),a.phoenixChannel},t}();n.a=e;var c=function(t,n,i){var e=i.initialData,r=i.onRejoin,o=this;this.S=0,this.phoenixChannel=t.channel(n,e),this.phoenixChannel.onError(function(t){return!1}),this.phoenixChannel.onClose(function(t){return!1}),this.phoenixChannel.join().receive("ok",function(){1<=o.S&&Object.keys(r).forEach(function(t){return r[t](o.phoenixChannel)}),o.S++}).receive("error",function(t){return!1})}},21:function(t,n,i){"use strict";i.d(n,"m",function(){return o}),i.d(n,"c",function(){return s}),i.d(n,"j",function(){return u}),i.d(n,"b",function(){return a}),i.d(n,"e",function(){return c}),i.d(n,"l",function(){return f}),i.d(n,"d",function(){return h}),i.d(n,"g",function(){return l}),i.d(n,"k",function(){return d}),i.d(n,"a",function(){return v}),i.d(n,"i",function(){return p}),i.d(n,"h",function(){return b});var e=i(23),r=i(32);function o(){var t=window.crypto,n=t?function(){return t.getRandomValues(new Uint8Array(1))[0]}:function(){return Math.floor(255*Math.random())};return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(t){return(t^n()&15>>t/4).toString(16)})}function s(){var i={},t=new e.a(function(t,n){i.resolve=t,i.reject=n});return i.promise=t,i}function u(n,i){var e=function(t){"string"==typeof t.data&&t.data===n&&(i(),window.removeEventListener("message",e))};window.addEventListener("message",e,!1)}function a(t){return n=JSON.stringify(t),btoa(unescape(encodeURIComponent(n)));var n}function c(t,r,o){return new e.a(function(n,i){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState){if(200<=e.status&&e.status<400){var t=e.response;n(t)}e.status?i(e.responseText):i("Error: Unable to connect")}},e.open(t,r),e.setRequestHeader("Content-Type","application/json"),e.send(o)})}function f(t,n){document.cookie=t+"="+n+";path=/"}function h(t){var n=l(t);document.cookie=t+"="+n+";expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/"}function l(t){for(var n=0,i=document.cookie.split("; ").map(function(t){return t.split("=")}).map(function(t){return{name:t[0],value:t[1]}});n<i.length;n++){var e=i[n];if(e.name===t)return e.value}}function d(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])}i.d(n,"f",function(){return r.b});var v=function(){function s(t){this.fields=t}return s.prototype.add=function(t,n){return new s(this.fields.concat([[t,n]]))},s.prototype.split=function(){for(var t=[],n=[],i=0,e=this.fields;i<e.length;i++){var r=e[i],o=r[1];"object"==typeof o||"string"==typeof o&&40<o.length?n.push(r):t.push(r)}return{short:new s(t),long:new s(n)}},s.prototype.toString=function(){return this.fields.map(function(t){var n=t[0],i=t[1];return null==i&&(i=""),"object"==typeof i&&(i=encodeURIComponent(a(i))),n+"="+i}).join("&")},s}(),O={ByV39eoc:1,B1FxElnd:1,aW4c49tW:1,qGfuGtx:1,SbERe5ee:1,ilaVEa15:1,FOlWOSaH:1,dao5gGmT:1,DLUgAhzL:1,fqXFumr6:1,FtiWHMYT:1,"66iWOyWt":1,"1375amYi":1,mWbJgzpt:1,jO7GqAvL:1,SkFIKxo5:1,"2z4ILc3y":1,aDr8oPL1:1};function p(t){return!Object(e.b)(t,"t")&&!O[t]}function b(){return!!window.cordova}},23:function(t,n,i){"use strict";i.d(n,"a",function(){return e}),i.d(n,"b",function(){return r});var e=i(165);function r(t,n,i){return i=i||0,t.substr(i,n.length)===n}},32:function(t,n,i){"use strict";i.d(n,"g",function(){return r}),i.d(n,"c",function(){return o}),i.d(n,"d",function(){return s}),i.d(n,"b",function(){return u}),i.d(n,"a",function(){return a}),i.d(n,"f",function(){return c}),i.d(n,"e",function(){return f});var e=i(43);function r(t){return function(){try{return t.apply(this,arguments)}catch(t){0}}}function o(t){return t.replace(/%2F/g,"/").replace(/^.*?\/([^\/]+?)(?:\?.*)?$/,"$1")}function s(t){return/(gif|png|jpg|jpeg|svg|bmp)$/i.test(t)}function u(t){return encodeURIComponent(t).replace(/%20/g,"+")}function a(t,n,i){return Object(e.a)(t+"_"+n+"_"+(i||"GLOBAL"))}function c(n){return new Promise(function(t){return setTimeout(t,n)})}function f(n,i,t){var e=void 0===t?{}:t,r=e.delay,o=void 0===r?0:r,s=e.log,u=e.retriedCount,a=void 0===u?0:u;return i().catch(function(t){if(s&&s("[TalkJS] Retries left: "+n+". Error: "+JSON.stringify(t)+"."),0===n)throw t;return c(1e3*o*Math.pow(2,a)).then(function(){return f(n-1,i,{retriedCount:a+1,delay:o,log:s})})})}},42:function(t,n,i){"use strict";i.d(n,"c",function(){return l}),i.d(n,"b",function(){return e}),i.d(n,"a",function(){return v});var f=i(23),h="talkjs_";function l(t,n,i){if(!(n instanceof Array))throw console.error("`params` must be array"),new Error("`params` must be array");d({params:n,method:t},i)}var c=0;function e(s,u,a){return new f.a(function(n,i){var t="respond_"+c++,e={},r=function(t){return v(t,{sourceWindow:a,handlers:e})},o=function(){return window.removeEventListener("message",r)};e[t]=function(t){o(),n(t)},e["error_"+t]=function(t){o(),i(t)},window.addEventListener("message",r),d({method:s,params:u,responseMethod:t},a)})}function d(t,n){n.postMessage(h+JSON.stringify(t),"*")}function v(t,n){var i=n.sourceWindow,e=n.handlers,r=n.prefix,o=void 0===r?"":r;if(t.data&&(!t.data||"string"==typeof t.data)&&Object(f.b)(t.data,h)){var s;try{s=JSON.parse(t.data.slice(h.length))}catch(t){return}if(s){var u=e[o+s.method];if(u&&i===t.source){var a;try{a=f.a.resolve(u.apply(e,s.params))}catch(t){a=f.a.reject(t)}var c=s.responseMethod;c?a.then(function(t){return l(c,[t],i)},function(t){return l("error_"+c,[t],i)}):a.catch(function(t){throw t})}}}}},43:function(t,n,i){"use strict";i.d(n,"a",function(){return r});var e=i(164);function r(t){var n=new e("SHA-1","TEXT");return n.update(t),n.getHash("HEX").substr(0,20)}},44:function(t,n,i){"use strict";i.d(n,"a",function(){return r}),i.d(n,"b",function(){return o}),i.d(n,"c",function(){return u}),i.d(n,"d",function(){return a});var c=i(8),e=function(){return(e=Object.assign||function(t){for(var n,i=1,e=arguments.length;i<e;i++)for(var r in n=arguments[i])Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}).apply(this,arguments)};function r(t,n,i){var e=s(t);return n.filter(function(t){return function(t,n){for(var i=!0,e=0,r=Object.getOwnPropertyNames(n.custom);e<r.length;e++){var o=r[e],s=h(o,t.custom,n.custom[o]);i=i&&s}if(void 0!==n.access){var u=function(t){var n=t.canWrite,i=t.canRead;if(n)return"ReadWrite";if(i)return"Read";return"None"}(t.rights),s=l(u,n.access);i=i&&s}if(void 0!==n.hasUnreadMessages){var s=n.hasUnreadMessages!==t.read;i=i&&s}return i}(i(t),e)})}function o(t,n,i){var e=s(t);return n.filter(function(t){return function(t,n){for(var i=!0,e=0,r=Object.getOwnPropertyNames(n.custom);e<r.length;e++){var o=r[e],s=h(o,t.custom,n.custom[o]);i=i&&s}if(void 0!==n.type){var s=l(t.type,n.type);i=i&&s}if(void 0!==n.origin){var s=l(t.origin,n.origin);i=i&&s}if(void 0!==n.sender){var u=n.sender,a=t.sender;if(null===a)return!1;if(void 0!==u.custom)for(var c=0,f=Object.getOwnPropertyNames(u.custom);c<f.length;c++){var o=f[c],s=h(o,a.custom,u.custom[o]);i=i&&s}if(void 0!==u.id){var s=l(a.id,u.id);i=i&&s}if(void 0!==u.locale){var s=l(a.locale,u.locale);i=i&&s}if(void 0!==u.role){var s=l(a.role,u.role);i=i&&s}}return i}(i(t),e)})}function s(t){return e({custom:{}},t)}function h(t,n,i){switch(i){case"exists":return t in n;case"!exists":return!(t in n)}return l(n[t],i)}function l(t,n){var i=n[0],e=n[1];switch(i){case"oneOf":return-1!==e.indexOf(t);case"!oneOf":return-1===e.indexOf(t);case"==":return t===e;case"!=":return t!==e}}function u(t,n){if(Object(c.c)(n.hasUnreadMessages,["boolean","undefined"],t+".hasUnreadMessages must be boolean."),Object(c.c)(n.custom,["object","undefined"],t+".custom must be an object."),n.custom)for(var i=0,e=Object.getOwnPropertyNames(n.custom);i<e.length;i++){var r=e[i];f(t+".custom."+r,n.custom[r])}Object(c.c)(n.access,["string[]","undefined"],t+".access must be an array."),n.access&&f(t+".access",n.access,["ReadWrite","Read","None"])}function a(t,n){if(Object(c.c)(n.origin,["string[]","undefined"],t+".origin must be a string."),n.origin&&f(t+".origin",n.origin,["web","rest","email","import"]),Object(c.c)(n.type,["string[]","undefined"],t+".type must be a string."),n.type&&f(t+".type",n.type,["SystemMessage","UserMessage"]),Object(c.c)(n.custom,["object","undefined"],t+".custom must be an object."),n.custom)for(var i=0,e=Object.getOwnPropertyNames(n.custom);i<e.length;i++){var r=e[i];f(t+".custom."+r,n.custom[r])}}function f(t,n,i){var e=t+" must be a valid predicate. See the docs for all available options.";if("string"!=typeof n){if(2!==n.length)throw new Error("[TalkJS] "+e);var r=n[0],o=n[1];if(Object(c.e)(r,["==","!=","oneOf","!oneOf"],e),"oneOf"===r||"!oneOf"===r){if(Object(c.c)(o,["string[]"],e),i)for(var s=0,u=o;s<u.length;s++){var a=u[s];Object(c.e)(a,i,e)}}else Object(c.c)(o,["string"],e),i&&Object(c.e)(o,i,e)}else Object(c.e)(n,["exists","!exists"],e)}},558:function(t,n,i){t.exports=i.p+"5e83cb28291edefe5f467e9b31453b97.mp3"},559:function(t,n){t.exports='.__talkjs_popup {\n  position: fixed;\n  right: 0;\n  border: 0;\n  z-index: 50000;\n  bottom: 77px;\n  width: 390px;\n  height: calc(75% - 77px);\n  height: calc(75vh - 77px);\n}\n@media all and (max-width: 420px) and (min-width: 1px), all and (max-height: 420px) and (min-width: 1px) {\n  .__talkjs_popup {\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    left: 0;\n    top: 0;\n    bottom: 0;\n  }\n}\n.__talkjs_launcher {\n  display: block;\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  width: 60px;\n  height: 60px;\n  border-radius: 50%;\n  z-index: 1000;\n  background-color: #0785f2;\n  background-position: center 17px;\n  background-size: 30px 30px;\n  background-repeat: no-repeat;\n  color: #fff;\n  text-align: center;\n  box-shadow: 2px 2px 19px 1px rgba(0,0,0,0.1);\n}\n.__talkjs_launcher.open {\n  background-size: 18px;\n  background-position: center 21px;\n  background-image: url("CLOSE");\n}\n@media all and (max-width: 420px), all and (max-height: 420px) {\n  .__talkjs_launcher.open {\n    display: none;\n  }\n}\n.__talkjs_launcher.closed {\n  background-image: url("OPEN");\n}\n.__talkjs_launcher:hover {\n  box-shadow: 2px 2px 19px 1px rgba(0,0,0,0.25);\n}\n'},560:function(t,n){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjMxMnB4IiBoZWlnaHQ9IjMxMnB4IiB2aWV3Qm94PSIwIDAgMzEyIDMxMiIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxwYXRoIGQ9Ik0xNzguNTAwNjgyLDE1NS44NjI2MTQgTDMwNi41Nzk2ODIsMjguNDgzMTU5MSBDMzEyLjcyMDEzNiwyMi40MDQ4ODY0IDMxMi43MjAxMzYsMTIuNTY0NjEzNiAzMDYuNTc5NjgyLDYuNTAxODg2MzYgQzMwMC40NTQ3NzMsMC40MjM2MTM2MzYgMjkwLjUwNTY4MiwwLjQyMzYxMzYzNiAyODQuMzgwNzczLDYuNTAxODg2MzYgTDE1Ni40MTA1OTEsMTMzLjc3MjUyMyBMMjcuMjU4OTU0NSw0LjYwNTM0MDkxIEMyMS4xMzQwNDU1LC0xLjUzNTExMzY0IDExLjE4NDk1NDUsLTEuNTM1MTEzNjQgNS4wNjAwNDU0NSw0LjYwNTM0MDkxIEMtMS4wNjQ4NjM2NCwxMC43NjEzNDA5IC0xLjA2NDg2MzY0LDIwLjcyNTk3NzMgNS4wNjAwNDU0NSwyNi44NjY0MzE4IEwxMzQuMTE4NDA5LDE1NS45NDAzNDEgTDQuNTkzNjgxODIsMjg0Ljc0OTk3NyBDLTEuNTMxMjI3MjcsMjkwLjgyODI1IC0xLjUzMTIyNzI3LDMwMC42Njg1MjMgNC41OTM2ODE4MiwzMDYuNzMxMjUgQzEwLjcxODU5MDksMzEyLjgwOTUyMyAyMC42Njc2ODE4LDMxMi44MDk1MjMgMjYuNzkyNTkwOSwzMDYuNzMxMjUgTDE1Ni4yMDg1LDE3OC4wMzA0MzIgTDI4NC44NDcxMzYsMzA2LjY4NDYxNCBDMjkwLjk3MjA0NSwzMTIuODI1MDY4IDMwMC45MjExMzYsMzEyLjgyNTA2OCAzMDcuMDQ2MDQ1LDMwNi42ODQ2MTQgQzMxMy4xNzA5NTUsMzAwLjUyODYxNCAzMTMuMTcwOTU1LDI5MC41NjM5NzcgMzA3LjA0NjA0NSwyODQuNDIzNTIzIEwxNzguNTAwNjgyLDE1NS44NjI2MTQgTDE3OC41MDA2ODIsMTU1Ljg2MjYxNCBaIiBpZD0iQ2xvc2UiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgIDwvZz4KPC9zdmc+"},561:function(t,n){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjQyMHB4IiBoZWlnaHQ9IjQyMHB4IiB2aWV3Qm94PSIwIDAgNDIwIDQyMCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJTaGFwZSI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xODcuNDAyNzY1LDMyNC41MzY1NDcgTDMwNS45NTAxMzgsNDE3LjM5ODY1NiBDMzA3Ljg5MDk1OCw0MTguODg0ODcgMzA5LjA3OTkyOCw0MTkuNjM2NzE5IDMxMC4yMzM5MjksNDE5LjYzNjcxOSBDMzEzLjUyMTA4Myw0MTkuNjM2NzE5IDMxNC41MDAyMzYsNDE3LjQxNjE0MSAzMTQuNTAwMjM2LDQxMy43MjY4MzUgTDMxNC41MDAyMzYsMzI1LjkwMDM2NyBDMzE0LjUwMDIzNiwzMTkuNjkzMjQgMzE4LjU3NDIwOSwzMTQuNzYyNTA5IDMyNC4wODE5NDEsMzE0Ljc2MjUwOSBMMzY3LjE4MjEyOSwzMTQuNzI3NTM5IEM0MDUuOTgxMDQxLDMxNC43Mjc1MzkgNDE5LjYzNjcxOSwyOTUuNTk5MDk5IDQxOS42MzY3MTksMjc5Ljc1NzgxMiBMNDE5LjYzNjcxOSwzNC45Njk3MjY2IEM0MTkuNjM2NzE5LDE3LjQ4NDg2MzMgNDA2LjU1ODA0MSwwIDM2Ni45MzczNDEsMCBMNTIuMjYyMjU2MywwIEMxNC4wMjI4NjA0LDAgMCwxNi45NDI4MzI1IDAsMzQuOTY5NzI2NiBMMCwyNzkuNzU3ODEyIEMwLDI5Ni43MDA2NDUgMTQuNDc3NDY2OCwzMTQuNzI3NTM5IDUyLjQ1NDU4OTgsMzE0LjcyNzUzOSBMMTU3LjM2Mzc3LDMxNC43Mjc1MzkgQzE1Ny4zNjM3NywzMTQuNzI3NTM5IDE3OS4zMDcyNzMsMzE1LjMzOTUwOSAxODcuNDAyNzY1LDMyNC41MzY1NDcgTDE4Ny40MDI3NjUsMzI0LjUzNjU0NyBaIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgIDxlbGxpcHNlIGlkPSJPdmFsLTEiIGZpbGw9IiMwNzg1RjIiIGN4PSIxMTUuMzQ3NjYxIiBjeT0iMTYyLjE4NDU1NiIgcng9IjI4LjM0NzY2MDgiIHJ5PSIyOC4xODQ1NTU3Ij48L2VsbGlwc2U+CiAgICAgICAgICAgIDxlbGxpcHNlIGlkPSJPdmFsLTEiIGZpbGw9IiMwNzg1RjIiIGN4PSIyMTAuNjk4ODg0IiBjeT0iMTYyLjE4NDU1NiIgcng9IjI4LjM0NzY2MDgiIHJ5PSIyOC4xODQ1NTU3Ij48L2VsbGlwc2U+CiAgICAgICAgICAgIDxlbGxpcHNlIGlkPSJPdmFsLTEiIGZpbGw9IiMwNzg1RjIiIGN4PSIzMDYuMDUwMTA2IiBjeT0iMTYyLjE4NDU1NiIgcng9IjI4LjM0NzY2MDgiIHJ5PSIyOC4xODQ1NTU3Ij48L2VsbGlwc2U+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},562:function(t,n,i){"use strict";i.r(n),n.default={ar:{DESKTOP_NOTIFICATIONS_ERROR:"لا يمكن تمكين إشعارات سطح المكتب نظرًا لأن المتصفح يعمل على حظرها بشكل نشط. جرّب البحث في الإعدادات أو استخدام متصفح آخر.",DESKTOP_NOTIFICATIONS_DEMO_TITLE:"إعلام $APPNAME التجريبي",DESKTOP_NOTIFICATIONS_DEMO_BODY:"إذا أبقيت علامة تبويب المتصفح مفتوحة ، فسترى هذا ينبثق عندما يتحدث شخص معك."},cs:{DESKTOP_NOTIFICATIONS_ERROR:"Nelze povolit upozornění na ploše, protože váš prohlížeč je aktivně blokuje. Zkuste se podívat na nastavení nebo zkuste použít jiný prohlížeč.",DESKTOP_NOTIFICATIONS_DEMO_TITLE:"$APPNAME demo notifikace",DESKTOP_NOTIFICATIONS_DEMO_BODY:"Pokud necháte kartu prohlížeče otevřenou, uvidíte tento popup jakmile s vámi bude někdo mluvit."},da:{DESKTOP_NOTIFICATIONS_ERROR:"Kan ikke aktivere skrivebordsmeddelelser, fordi din browser aktivt blokerer dem. Prøv at kigge i indstillingerne eller benyt en anden browser.",DESKTOP_NOTIFICATIONS_DEMO_TITLE:"$APPNAME demomeddelelse",DESKTOP_NOTIFICATIONS_DEMO_BODY:"Hvis du holder dit browser-faneblad åben, vil du se det her komme op, når nogen taler til dig."},de:{DESKTOP_NOTIFICATIONS_ERROR:"Desktop-Benachrichtigungen können nicht aktiviert werden, da Ihr Browser sie aktiv blockiert. Versuchen Sie, in den Einstellungen nachzuschlagen oder einen anderen Browser zu verwenden.",DESKTOP_NOTIFICATIONS_DEMO_TITLE:"$APPNAME Demo-Benachrichtigung",DESKTOP_NOTIFICATIONS_DEMO_BODY:"Wenn Sie Ihre Browser-Registerkarte geöffnet lassen, wird dies angezeigt, wenn jemand mit Ihnen spricht."},el:{DESKTOP_NOTIFICATIONS_ERROR:"Δεν είναι δυνατή η ενεργοποίηση των ειδοποιήσεων της επιφάνειας εργασίας,επειδή το πρόγραμμα περιήγησης τις μπλοκάρει. Δοκιμάστε να τσεκάρετε τις ρυθμίσεις η χρησιμοποιήστε άλλο πρόγραμμα περιήγησης.",DESKTOP_NOTIFICATIONS_DEMO_TITLE:"$APPNAME Δοκιμαστική επίδειξη",DESKTOP_NOTIFICATIONS_DEMO_BODY:"Αν διατηρήσετε ανοιχτή τη σελίδα του προγράμματος περιήγησης, θα δείτε αυτό το pop up (παράθυρο) όταν κάποιος σας μιλάει."},en:{DESKTOP_NOTIFICATIONS_ERROR:"Can't enable desktop notifications because your browser actively blocks them. Try looking in the settings or using a different browser.",DESKTOP_NOTIFICATIONS_DEMO_TITLE:"$APPNAME demo notification",DESKTOP_NOTIFICATIONS_DEMO_BODY:"If you keep your browser tab open, you'll see this pop up when someone talks to you."},es:{DESKTOP_NOTIFICATIONS_ERROR:"No se logró habilitar las notificaciones de escritorio, comprueba que tu navegador no las esté bloqueando o intenta con otro navegador.",DESKTOP_NOTIFICATIONS_DEMO_TITLE:"$APPNAME notificación de prueba",DESKTOP_NOTIFICATIONS_DEMO_BODY:"Si dejas esta pestaña abierta, verás este pop up cuando alguien te hable."},fi:{DESKTOP_NOTIFICATIONS_ERROR:"Työpöydän ilmoituksia ei voitu kytkeä päälle, koska selaimesi estää sen. Koeta tutkia sen asetuksia tai vaihda selainta.",DESKTOP_NOTIFICATIONS_DEMO_TITLE:"$APPNAME demo ilmoitus",DESKTOP_NOTIFICATIONS_DEMO_BODY:"Jos pidät tämän sivun auki, näet vastaavan ilmoituksen kun joku puhuu sinulle."},fr:{DESKTOP_NOTIFICATIONS_ERROR:"Impossible d'activer les notifications sur votre ordinateur car votre navigateur les bloque. Essayez de changer ses paramètres ou de changer de navigateur.",DESKTOP_NOTIFICATIONS_DEMO_TITLE:"Notification de démonstration $APPNAME",DESKTOP_NOTIFICATIONS_DEMO_BODY:"Si vous maintenez l'onglet ouvert dans votre navigateur vous verrez apparaître une alerte lorsque quelqu'un vous parlera."},hu:{DESKTOP_NOTIFICATIONS_ERROR:"Azért nem tudja bekapcsolni az asztali értesítések funkciót, mert böngészője aktívan blokkolja azt. Tekintse meg a beállításokat vagy használjon másik böngészőt.",DESKTOP_NOTIFICATIONS_DEMO_TITLE:"$APPNAME demo értesítés",DESKTOP_NOTIFICATIONS_DEMO_BODY:"Ha nyitva hagyja böngészőjét, felugró ablak fog megjelenni, ha valaki beszélni szeretne Önnel."},id:{DESKTOP_NOTIFICATIONS_ERROR:"Tidak dapat mengaktifkan pemberitahuan desktop karena browser Anda secara aktif memblokir mereka. Coba cari di pengaturan atau menggunakan browser yang berbeda.",DESKTOP_NOTIFICATIONS_DEMO_TITLE:"pemberitahuan demo $APPNAME",DESKTOP_NOTIFICATIONS_DEMO_BODY:"Jika Anda membiarkan tab browser tetap terbuka, Anda akan melihat ini muncul ketika seseorang berbicara kepada Anda."},it:{DESKTOP_NOTIFICATIONS_ERROR:"Impossibile abilitare le notifiche desktop perché il browser le blocca attivamente. Prova a cercare le impostazioni o utilizzare un browser diverso.",DESKTOP_NOTIFICATIONS_DEMO_TITLE:"$APPNAME demo notification",DESKTOP_NOTIFICATIONS_DEMO_BODY:"Se si mantiene aperta la scheda del browser, questo verrà visualizzato quando qualcuno ti parla."},ja:{DESKTOP_NOTIFICATIONS_ERROR:"デスクトップの通知はブロックされているため、デスクトップの通知を有効にできません。設定を確認するか、別のブラウザを使用してください。",DESKTOP_NOTIFICATIONS_DEMO_TITLE:"$APPNAME デモ通知",DESKTOP_NOTIFICATIONS_DEMO_BODY:"ブラウザのタブを開いたままにしておくと、誰かがあなたに話しかけたときにこのポップアップが表示されます。"},ka:{DESKTOP_NOTIFICATIONS_ERROR:"შეუძლებელია დესკტოპის შეტკობინებების ჩართვა. ეს ბრაუზერი ბლოკავს მათ. სცადე ცვლილება ოპციებიდან ან გამოიყენე სხვა ბრაუზერი.",DESKTOP_NOTIFICATIONS_DEMO_TITLE:"$APPNAME შეტყობინებების დემო ვერსია",DESKTOP_NOTIFICATIONS_DEMO_BODY:"თუ დატოვებ ბრაუზერის ფანჯარას გახსნილს, როცა ვიღაც მოგწერს საუბარი ამოვარდება დესკტოპზე."},ko:{DESKTOP_NOTIFICATIONS_ERROR:"데스크톱 알림을 표시할 수 없습니다. 브라우저 설정을 확인하거나 다른 브라우저를 사용해주세요.",DESKTOP_NOTIFICATIONS_DEMO_TITLE:"$APPNAME 데모 알림",DESKTOP_NOTIFICATIONS_DEMO_BODY:"브라우저 탭을 열어 둔 상태에서 누군가 대화 할 때 이 팝업이 표시됩니다."},nb:{DESKTOP_NOTIFICATIONS_ERROR:"Kan ikke aktivere skrivebords varsler fordi nettleseren din aktivt blokkerer dem. Prøv å se i innstillingene eller bruke en annen nettleser.",DESKTOP_NOTIFICATIONS_DEMO_TITLE:"$APPNAME demo varslinger",DESKTOP_NOTIFICATIONS_DEMO_BODY:"Hvis du holder nettleservinduet åpent, vil du se dette varsel når noen snakker til deg."},nl:{DESKTOP_NOTIFICATIONS_ERROR:"Desktop notificaties kunnen niet geactiveerd worden omdat de browser het blokkeert. Check de instellingen van je browser of probeer een andere browser.",DESKTOP_NOTIFICATIONS_DEMO_TITLE:"$APPNAME demo notificatie",DESKTOP_NOTIFICATIONS_DEMO_BODY:"Als je je browser open houdt, zie je deze popup als iemand tegen je praat."},pl:{DESKTOP_NOTIFICATIONS_ERROR:"Nie można aktywować powiadomień, ponieważ twoja przeglądarka je blokuje. Proszę zmienić ustawienie lub spróbować innej przeglądarki.",DESKTOP_NOTIFICATIONS_DEMO_TITLE:"$APPNAME przykładowe powiadomienie",DESKTOP_NOTIFICATIONS_DEMO_BODY:"Jeśli zostawisz tę kartę otwartą, zobaczysz takie powiadomienie, gdy ktoś napisze do Ciebie."},pt:{DESKTOP_NOTIFICATIONS_ERROR:"Não é possível ativar as notificações da área de trabalho porque seu navegador as bloqueia. Tente procurar nas configurações ou usar um navegador diferente.",DESKTOP_NOTIFICATIONS_DEMO_TITLE:"$APPNAME notificação de demonstração",DESKTOP_NOTIFICATIONS_DEMO_BODY:"Se você mantiver a guia do navegador aberta, verá essa mensagem quando alguém falar com você."},ro:{DESKTOP_NOTIFICATIONS_ERROR:"Nu se pot activa notificările de pe desktop deoarece browserul dvs. le blochează în mod activ. Încercați să căutați în setări sau utilizând un alt browser.",DESKTOP_NOTIFICATIONS_DEMO_TITLE:"Notificare de debit $APPNAME",DESKTOP_NOTIFICATIONS_DEMO_BODY:"Dacă țineți fișa browserului deschis, veți vedea acest pop-up atunci când cineva vorbește cu dvs."},ru:{DESKTOP_NOTIFICATIONS_ERROR:"Невозможно включить оповещения, потому что ваш браузер активно блокирует их. Проверьте ваши настройки или попробуйте другой браузер.",DESKTOP_NOTIFICATIONS_DEMO_TITLE:"$APPNAME демо-оповещение",DESKTOP_NOTIFICATIONS_DEMO_BODY:"Если вкладка вашего браузера открыта, вы увидите всплывающее окошко оповещения когда кто-то отправит вам сообщение."},sv:{DESKTOP_NOTIFICATIONS_ERROR:"Kan inte aktivera notiser eftersom din webbläsare aktivt blockerar dem. Se över inställningarna eller använd en annan webbläsare.",DESKTOP_NOTIFICATIONS_DEMO_TITLE:"$APPNAME demonotis",DESKTOP_NOTIFICATIONS_DEMO_BODY:"Om du har fliken i webbläsaren öppen så kommer den här notisen visas när någon pratar med dig."},tr:{DESKTOP_NOTIFICATIONS_ERROR:"Tarayıcınız aktif olarak engellediğinden masaüstü bildirimlerini etkinleştiremiyoruz. Ayarları kontrol etmeyi veya farklı bir tarayıcı kullanmayı deneyebilirsiniz.",DESKTOP_NOTIFICATIONS_DEMO_TITLE:"$APPNAME test bildirimi",DESKTOP_NOTIFICATIONS_DEMO_BODY:"Eğer tarayıcınızın penceresini açık tutarsanız biri mesaj yazdığında bu bildirimi göreceksiniz."},zh:{DESKTOP_NOTIFICATIONS_ERROR:"因浏览器设置为阻止，所以无法激活桌面提醒 。请去设置里查看或者尝试其他的浏览器。",DESKTOP_NOTIFICATIONS_DEMO_TITLE:"$APPNAME 演示提醒",DESKTOP_NOTIFICATIONS_DEMO_BODY:"只要保持浏览器开着，如果有人和你对话，将会自动弹出对话窗口。"}}},632:function(t,n,i){"use strict";i.r(n);var w=i(8),v=function(t,n){this.user=t;var i=(n=Object(w.c)(n,["undefined","object"],'Conversation.setParticipants: optional field "settings" is given but not an object.'))||{access:void 0,notify:void 0},e=i.access,r=i.notify;e=Object(w.c)(e,["undefined","string"],'Conversation.setParticipants: optional field "settings.access" is given but not one of "ReadWrite" or "Read".',[function(t){return void 0===t||"Read"===t||"ReadWrite"===t}]),r=Object(w.c)(r,["undefined","boolean"],'Conversation.setParticipants: optional field "settings.notify" is given but not a boolean.'),this.participationSettings={access:e,notify:r},this.participationSetting=this.participationSettings},s=i(43);function y(t){return[t=(t=Object(w.c)(t,["string","number"],'User: required field "id" is not given or not a string or a number.')).toString(),Object(s.a)(t)+"_n"]}var O=function(t,n){var i,e,r,o,s;if(void 0===t&&(t={}),void 0===n&&(n=!1),n){for(var u in t)this[u]=t[u];return this}if("string"==typeof(s=t)||s instanceof String||"number"==typeof s||s instanceof Number)this.__sync=!1,i=y(t),this.id=i[0],this.internalId=i[1];else{this.__sync=!0;var a=t.id,c=t.name,f=t.email,h=t.phone,l=t.photoUrl,d=t.welcomeMessage,v=t.role,O=t.configuration,p=t.custom,b=t.availabilityText,g=t.locale;e=y(a),this.id=e[0],this.internalId=e[1],this.email=Object(w.c)(f,["null","undefined","string","string[]"],"User "+a+': optional field "email" is not a string or array of strings. Pass `null` if you\'re sure the user should never get emails',[w.b]),this.phone=Object(w.c)(h,["null","undefined","string","string[]"],"User "+a+': optional field "phone" is given but not a string or array of strings.',[w.b]);for(var T=0,I=[].concat(void 0===this.phone||null===this.phone?[]:this.phone);T<I.length;T++){var m=I[T];if(!/^\+[1-9]\d{1,14}$/.test(m))throw new Error("User "+a+': optional field "phone" does not conform E.164 standard. Numbers should start with a plus, followed by a country code and then the phone number. Numbers must not have any other special characters like dashes or spaces. For example, a UK phone number 0123456789 would be formatted as "+44123456789" ('+m+").")}this.name=Object(w.c)(c,["string"],"User "+a+': required field "name" is not given or not a string or is an empty string.',[w.b]),this.welcomeMessage=Object(w.c)(d,["null","undefined","string"],"User "+a+': optional field "welcomeMessage" is given but not a string or is an empty string.',[w.b]),this.role=Object(w.c)(v,["null","undefined","string"],"User "+a+': optional field "role" is given but not a string or is an empty string.',[w.b]),this.configuration=Object(w.c)(O,["null","undefined","string"],"User "+a+': optional field "configuration" is given but not a string or is an empty string.',[w.b]),l=Object(w.c)(l,["null","undefined","string"],"User "+a+': optional field "photoUrl" is given but not a string or is an empty string.',[w.b]),this.custom=Object(w.c)(p,["null","undefined","object"],"User "+a+': optional field "custom" is given but not an object.'),this.photoUrl=l&&(r=l,(o=document.createElement("a")).href=r,o.href),this.availabilityText=Object(w.c)(b,["null","undefined","string"],"User "+a+': optional field "availabilityText" is given but not a string or is an empty string.',[w.b]),this.locale=Object(w.c)(g,["null","undefined","string"],"User "+a+': optional field "locale" is given but not a string or is an empty string or does not conform the BCP 47 format.',[w.b,w.a]),this.custom&&Object(w.d)(this.custom,["string"],function(t){return"User "+a+': optional field "custom.'+t+'" is given but not a string.'}),this.configuration||this.role||console.warn("[TalkJS] No role is set for user "+a+". TalkJS will work, but with some features disabled (such as email notifications)."),this.configuration&&this.role&&console.warn("[TalkJS] A configuration and role was set for the user "+a+", the assigned role will take presedence over a configuration."),this.role&&(this.configuration=this.role)}};var u,e,a,r,p=function(t,n){var i=t.conversationId,e=t.participants,r=t.topicId,o=t.subject,s=t.photoUrl,u=t.welcomeMessages,a=t.custom;this.D=n,this.participants=[],this.id=Object(w.c)(i,["string"],"Conversation: field conversationId cannot be empty.",[w.b]);for(var c=0,f=e;c<f.length;c++){var h=f[c];this.participants.map(function(t){return t.user.id}).indexOf(h.user.id)<0&&this.participants.push(h)}this.subject=Object(w.c)(o,["null","undefined","string"],'Conversation: optional field "subject" is given but not an string.'),this.custom=Object(w.c)(a,["null","undefined","object"],'Conversation: optional field "custom" is given but not an object.'),this.photoUrl=Object(w.c)(s,["null","undefined","string"],'Conversation: optional field "photoUrl" is given but not an string or is an empty string.',[w.b]),this.welcomeMessages=Object(w.c)(u,["null","undefined","string[]"],'Conversation: optional field "welcomeMessages" is given but not an array of strings.'),this.custom&&Object(w.d)(this.custom,["string"],function(t){return'Field "custom.'+t+'" must be a string.'}),r=null!=r?r.toString():void 0,this.topicId=Object(w.c)(r,["undefined","string"],'Conversation: optional field "topicId" is given but not an string or is an empty string.',[w.b]),this.internalId=l(this.id)},o=function(){function t(t,n){this.D=n,this.participants=[],this.id=Object(w.c)(t,["string"],"Conversation: field conversationId cannot be empty.",[w.b]),this.internalId=l(this.id)}return t.prototype.setParticipant=function(n,t){if(this.D._(),!(n instanceof O))throw new Error("[TalkJS] The first argument of ConversationBuilder#setParticipant should be of type Talk.User. For example:\n            \nvar user = new Talk.User(data);\nconversation.setParticipant(user);\n            \nFor more information check our documentation https://talkjs.com/docs/api/classes/conversationbuilder.html#setparticipant\n            ");this.participants=this.participants.filter(function(t){return t.user.id!==n.id}),this.participants.push(new v(n,t))},t.prototype.setAttributes=function(t){this.D._(),this.subject=Object(w.c)(t.subject,["null","undefined","string"],'Conversation.setAttributes: optional field "subject" is given but not an string.'),this.custom=Object(w.c)(t.custom,["null","undefined","object"],'Conversation.setAttributes: optional field "custom" is given but not an object.'),this.photoUrl=Object(w.c)(t.photoUrl,["null","undefined","string"],'Conversation.setAttributes: optional field "photoUrl" is given but not an string or is an empty string.',[w.b]),this.welcomeMessages=Object(w.c)(t.welcomeMessages,["null","undefined","string[]"],'Conversation.setAttributes:Conversation: optional field "welcomeMessages" is given but not an array of strings'),this.custom&&Object(w.d)(this.custom,["string"],function(t){return'Conversation.setAttributes: Field "custom.'+t+'" must be a string.'})},t.prototype.sendMessage=function(n,t){var i=(void 0===t?{}:t).custom;this.D._(),n=Object(w.c)(n,["string"],"sendMessage() accepts a single String value representing the text of the message"),i&&Object(w.d)(i,["string"],function(t){return'Field "custom.'+t+'" must be a string.'});var e=this.internalId;return this.D.A.then(function(t){return t.sendMessage({text:n,custom:i},e)})},t}();function b(t,n,i){return"string"==typeof t&&(t=new O(t)),"string"==typeof n&&(n=new O(n)),function(t,n){var i=t.map(function(t){return t.id});i.sort();var e={p:i};return void 0!==n&&(e.t=n),JSON.stringify(e)}([t,n],i)}function l(t){return Object(s.a)(t)}function c(t){return new O({id:t.externalId,internalId:t.id,name:t.name,email:"<suppressed>",welcomeMessage:t.welcomeMessage,photoUrl:t.photoUrl,role:t.configuration,configuration:t.configuration,custom:t.custom,availabilityText:t.availabilityText,locale:t.locale},!0)}(e=u||(u={}))[e.Inbox=0]="Inbox",e[e.Chatbox=1]="Chatbox",e[e.Popup=2]="Popup",(r=a||(a={}))[r.Widget=0]="Widget",r[r.Popover=1]="Popover";var f=i(70),h=i(32);function d(){var t=function(){if(document.currentScript)return document.currentScript.src;try{throw new Error}catch(t){return t.stack.match(/https?:\/\/.*\.js/)[0]}}(),n=document.createElement("a");return n.href=t,n}var g,T,I,m,N=(g=d().host).match(/^cdn[\.-]/)?g.replace(/^cdn/,"app"):g,M=d().protocol,E=(T=function(t,n){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])})(t,n)},function(t,n){function i(){this.constructor=t}T(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)});(m=I||(I={}))[m.NOTIFICATIONS_PERMISSION_DENIED=0]="NOTIFICATIONS_PERMISSION_DENIED",m[m.NOTIFICATIONS_NOT_SUPPORTED=1]="NOTIFICATIONS_NOT_SUPPORTED";var j=function(r){function t(t,n){var i=this.constructor,e=r.call(this,"[TalkJS] "+n)||this;return e.code=t,Object.setPrototypeOf&&Object.setPrototypeOf(e,i.prototype),e}return E(t,r),t.Code=I,t}(window.Error),k="talkjs:desktop_notify",S=function(){try{return Audio&&new Audio(M+"//"+N+i(558))}catch(t){return null}}();function D(){return window.Notification&&"granted"===Notification.permission}var _=[];function A(t,n){var i=void 0===t?{}:t,e=i.title,r=i.body;i.conversationId;if(r){S&&S.play();var o=new Notification(e||"",{body:r,icon:function(){if(C)return C;for(var t=document.getElementsByTagName("head")[0].getElementsByTagName("link"),n=[],i=t.length-1;0<=i;i--)/(^|\s)icon(\s|$)/i.test(t[i].getAttribute("rel")||"")&&n.push(t[i]);var e=n.reduce(function(t,n){return R(t)>R(n)?t:n},void 0);return C=e&&e.getAttribute("href")||void 0}()});o.onclick=function(){n(),window.focus()},_.push(o)}}window.addEventListener("focus",function(){_.forEach(Object(h.g)(function(t){return t.close()})),_=[]});var C,P=!1,z=0;function x(t,n){var e=n.locale,i=n.alertOnFailure,r=n.appName;return f.a.set(k,t),t?(D()?Promise.resolve(!0):window.Notification?new Promise(function(t){Notification.requestPermission(function(){t(D())})}):Promise.reject(new j(j.Code.NOTIFICATIONS_NOT_SUPPORTED,"The browser doesn't support desktop notifications."))).then(function(t){if(!t||r){if(!t||!r)throw f.a.set(k,!1),new j(j.Code.NOTIFICATIONS_PERMISSION_DENIED,"The user or the browser denied permission to send notifications.");var n,i;n=r,A({title:(i=e).t("DESKTOP_NOTIFICATIONS_DEMO_TITLE",{APPNAME:n}),body:i.t("DESKTOP_NOTIFICATIONS_DEMO_BODY")},function(){})}}).catch(function(t){throw i&&alert(e.t("DESKTOP_NOTIFICATIONS_ERROR")),t}):Promise.resolve()}function L(){return D()&&Boolean(f.a.get(k))}function R(t){return parseInt(t&&(t.getAttribute("sizes")||"").split("x")[0]||"0")}var F=function(){function t(t){this.C={};for(var n=0,i=t;n<i.length;n++){var e=i[n];this.C[e]=[]}}return t.prototype.emit=function(n,t){for(var i=0,e=this.C[n];i<e.length;i++){var r=e[i];try{r(t)}catch(t){console.error("[TalkJS] '"+n+"' handler threw an error:",t)}}},t.prototype.supports=function(t){return t in this.C},t.prototype.on=function(t,n){if(!this.supports(t))throw new Error("Unknown event type '"+t+"'");this.C[t].push(n)},t.prototype.off=function(t,n){if(!(t in this.C))throw new Error("Unknown event type '"+t+"'");var i=this.C[t].indexOf(n);-1!==i&&this.C[t].splice(i,1)},t.prototype.removeAllListeners=function(){for(var t in this.C)this.C[t]=[]},t}(),U=i(23),B=i(21);function Y(t){var n,i,e=t.side,r=t.sender;return i=null===r?n=null:(n=r.externalId,c(r)),{conversation:J(e),isByMe:e.isByMe,senderId:n,sender:i,body:e.lastMessageBody,type:e.lastMessageType,timestamp:e.lastMessageTs,read:e.lastMessageRead,origin:e.lastMessageOrigin,custom:e.lastMessageCustom,attachment:e.lastMessageAttachment,location:e.lastMessageLocation}}function J(t){return{id:t.conversationExternalId,custom:t.conversationCustom,topicId:t.conversationTopicId,subject:t.conversationSubject,welcomeMessages:t.conversationWelcomeMessages,photoUrl:t.conversationPhotoUrl}}var K=function(){function t(t,n,i){var a=this;this.P=n,this.z=i,this.x=new F(["change"]),this.L={},this.R=B.c(),this.F=void 0,this.U=!1,this.B=function(t){for(var n=[],i=0,e=t||[];i<e.length;i++){var r=e[i],o=a.L[r.id];o&&o.lastMessageTs!==r.lastMessageTs&&n.push(r),a.L[r.id]=r}a.R.resolve(void 0);var s=Object.keys(a.L).map(function(t){return a.L[t]}).filter(function(t){return!1===t.lastMessageRead}),u=a.Y(s);U.a.all(u).then(function(r){U.a.all(a.Y(n)).then(function(t){a.J(r);for(var n=0,i=t.filter(function(t){return!t.side.lastMessageRead});n<i.length;n++){var e=i[n];a.K(e)}a.H(t)})})},t.then(function(t){a.Q=t,a.G({amount:20})})}return t.prototype.G=function(t){var n=this,i=t.amount;this.R=B.c();var e=this.Q.getOrJoinChannel("seq/sides/"+this.Q.me.internalId);e.on("recordUpdated",function(t){return n.B(t.data)}),e.push("get_all",{limit:i}).receive("ok",function(t){return n.B(t.data)})},t.prototype.W=function(t){var n=this;return this.R.promise.then(function(){return J(n.L[t])})},t.prototype.Y=function(t){var i=this;return t.filter(function(t){return null!==t.lastMessageSenderId}).map(function(n){return i.Q.getNym(n.lastMessageSenderId).then(function(t){return{side:n,sender:t}})})},t.prototype.Z=function(t,r){if(t.length!==r.length)return!0;for(var n=function(n){var t=r.filter(function(t){return t.lastMessage.conversation.id===n.lastMessage.conversation.id})[0];if(!t)return{value:!0};var i=n.lastMessage,e=t.lastMessage;return i.body!==e.body?{value:!0}:i.conversation.id!==e.conversation.id?{value:!0}:i.isByMe!==e.isByMe?{value:!0}:i.read!==e.read?{value:!0}:i.timestamp!==e.timestamp?{value:!0}:i.type!==e.type?{value:!0}:void 0},i=0,e=t;i<e.length;i++){var o=n(e[i]);if("object"==typeof o)return o.value}return!1},t.prototype.J=function(t){var n=t.map(function(t){return{lastMessage:Y(t)}});this.F&&!this.Z(n,this.F)||this.x.emit("change",n),this.F=n},t.prototype.H=function(t){for(var n=0,i=t;n<i.length;n++){var e=i[n];this.P(Y(e))}},t.prototype.K=function(t){var n,i,e,r=this,o=t.side,s=t.sender,u=Date.now();if(null!==o.lastMessageSenderId&&null!==s){this.$={body:this.X(o),title:s.name};var a=Date.now()-u;n=function(){return r.$},i=Math.max(0,500-a),e=function(){return r.z(o.conversationExternalId)},void 0===i&&(i=500),!P&&L()&&(z+100>Date.now()||(P=!0,setTimeout(function(){try{if(!document.hasFocus()){var t=n();t&&A(t,e)}}finally{P=!1,z=Date.now()}},i)))}},t.prototype.V=function(o,s){return function(t){var n,i=[];for(o.lastIndex=0;n=o.exec(t);){var e=n[0],r=n.index;i.push({offset:r,matchedText:e,regexMatch:n,getType:function(){return s}})}return i}},t.prototype.X=function(n){if("text"===n.lastMessageType){if("rest"===n.lastMessageOrigin)this.V(/<((?:https?|mailto):.*?)\|(.*?)>/gi,"talkjs-formatted-link")(n.lastMessageBody).forEach(function(t){n.lastMessageBody=n.lastMessageBody.replace(t.regexMatch[0],t.regexMatch[2])});return n.lastMessageBody}if("location"===n.lastMessageType)return"📍 Shared location";if("media"===n.lastMessageType&&n.lastMessageAttachment){var t=n.lastMessageAttachment.url,i=Object(h.c)(t);return Object(h.d)(i)?"📷 "+i:"[↓] "+i}return""},t.prototype.on=function(t,n){this._(),this.x.on(t,n)},t.prototype.off=function(t,n){this.x.off(t,n)},t.prototype._=function(){if(this.U)throw new Error("[TalkJS] This object has been destroyed, please create a new Session.")},t.prototype.tt=function(){this.U=!0,this.Q&&this.Q.disconnect(),this.x.removeAllListeners()},t}(),H=function(t){t.then(function(t){return t.getOrJoinChannel("me:"+t.me.internalId)})},Q=i(209),G=i(208),W=function(){return(W=Object.assign||function(t){for(var n,i=1,e=arguments.length;i<e;i++)for(var r in n=arguments[i])Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}).apply(this,arguments)},Z=function(t,n,i){var e=this;this.Q=t,this.nt=this.Q.getOrJoinChannel("record/"+n+"/"+i),this.loaded=new U.a(function(n,i){e.nt.push("get",{}).receive("ok",function(t){e.value=t.data,n()}).receive("error",function(t){return i(t)}).receive("timeout",function(){return i("timeout")}),e.nt.on("recordUpdated",function(t){return e.value=t.data})})},$=function(){function t(t,n,i,e,r,o,s){void 0===s&&(s=0),this.boken=t,this.me=n,this.appId=i,this.serverHostname=e,this.appLocale=r,this.w=o,this.version=s,this.et={},this.rt=new Q.a(function(t){0;return"wss://"+t}(this.serverHostname),this.appId,"JSSDK",o),this.rt.connect(this.boken)}return t.prototype.url=function(t){var n=-1===t.indexOf("?")?"?":"&";return"https://"+this.serverHostname+"/api/v"+this.version+"/"+this.appId+t+n+"authToken="+this.boken},t.prototype.getNym=function(t){t in this.et||(this.et[t]=new Z(this,"nyms",t));var n=this.et[t];return n.loaded.then(function(){return n.value})},t.prototype.post=function(t,n){return Object(B.e)("POST",this.url(t),JSON.stringify(n))},t.prototype.put=function(t,n){var i=this;return this.ot(function(){return Object(B.e)("PUT",i.url(t),JSON.stringify(n))})},t.prototype.delete=function(t){var n=this;return this.ot(function(){return Object(B.e)("DELETE",n.url(t))})},t.prototype.getOrJoinChannel=function(t,n){void 0===n&&(n={});var i=W({},n,{meId:this.me.internalId});return this.rt.getOrJoin(t,{initialData:i})},t.prototype.ot=function(t,n){var i=void 0===n?{}:n,e=i.retries,r=void 0===e?10:e,o=i.delay,s=void 0===o?.2:o;return Object(h.e)(r,t,{delay:s,log:void 0})},t.prototype.sendMessage=function(t,n){var i=t.text,e=t.custom,r=Object(G.a)(),o=this.w,s=this.me.internalId;return this.put("/say/"+n+"/"+r+"/?sessionId="+o,{text:i,custom:e,nymId:s}).then(function(){0})},t.prototype.disconnect=function(){this.rt.disconnect()},t}();var q,X=i(42),V=function(){function t(t){var n=this;this.getSourceWindow=t,this.C={},this.router=function(t){return X.a(t,{sourceWindow:n.getSourceWindow(),handlers:n.C,prefix:"on_"})},window.addEventListener("message",this.router)}return t.prototype.destroy=function(){window.removeEventListener("message",this.router)},t.prototype.listen=function(t,i,n){this.C["on_"+n]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return i.apply(void 0,t)}},t.prototype.unlisten=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var i in this.C)-1!==t.indexOf(this.C[i])&&delete this.C[i]},t}(),tt=(q=function(t,n){return(q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])})(t,n)},function(t,n){function i(){this.constructor=t}q(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}),nt=function(){return(nt=Object.assign||function(t){for(var n,i=1,e=arguments.length;i<e;i++)for(var r in n=arguments[i])Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}).apply(this,arguments)},it=function(){function t(t,n,i,e,r){var o=this;this.T=t,this.st=n,this.initialPath=e,this.queryStringData=r,this.ut=!1,this.at=B.c(),this.request=function(t,n){o.at.promise.then(function(){X.c(t,n,o.ct.contentWindow)})},this.ask=function(t,n){return o.at.promise.then(function(){return X.b(t,n,o.ct.contentWindow)})},this.nav=function(t,n,i){if(void 0===n&&(n={}),void 0===i&&(i={}),o.ut){var e=new et(nt({dbSyncData:n},i));o.request("nav",[o.ft(t),e.toString()])}else{e=new et(nt({},o.queryStringData,{dbSyncData:n},i));o.ht(t,e)}},this.mount=function(t,n){t!==o.lt&&(o.lt=t,o.dt(),n(o.ct.style))},this.vt="https://"+i,this.ct=document.createElement("iframe"),this.ct.scrolling="no",this.ct.style.border="none",this.ct.setAttribute("aria-label","TalkJS iframe"),this.Ot(this.ct);var s=new et(this.queryStringData);this.ht(this.initialPath,s),B.j("__talkjs:appready",function(){o.at.resolve(void 0)})}return t.prototype.Ot=function(t){var n=this;t.onload=function(t){n.ut=!0}},t.prototype.bt=function(t){return this.vt+"/app/"+this.T+this.ft(t)},t.prototype.ft=function(t){return"/user/"+this.st+"/"+t},t.prototype.contentWindow=function(){return this.ct.contentWindow},t.prototype.patchQueryString=function(t){return this.ask("patchQueryString",[t])},t.prototype.ht=function(t,n){var i=n.split(),e=i.short,r=i.long.toString(),o=Object(s.a)(r);B.e("PUT",this.vt+"/__buffer/"+o,JSON.stringify({value:r}));this.ct.src=this.bt(t+"?"+e.add("bufferKey",o).toString())},t.prototype.patchLocalSettings=function(t){return this.patchQueryString({localSettings:t})},t.prototype.dt=function(){this.lt.appendChild(this.ct)},t.prototype.cleanupContainer=function(){if(this.lt.hasChildNodes()){for(;this.lt.firstChild&&this.lt.firstChild!==this.ct;)this.lt.removeChild(this.lt.firstChild);for(;this.lt.lastChild&&this.lt.lastChild!==this.ct;)this.lt.removeChild(this.lt.lastChild)}},t.prototype.destroy=function(){var t=this.ct.parentNode;t&&t.removeChild(this.ct)},t.prototype.isZombie=function(){return!!this.ut&&!document.body.contains(this.ct)},t}(),et=function(f){function t(t){var n=t.dbSyncData,i=t.localSettings,e=t.clientHeight,r=t.signature,o=t.externalUserId,s=t.messageSuggestion,u=t.thirdparties,a=t.sessionId,c=[["syncPlease",n]];return i&&c.push(["localSettings",i]),c.push(["clientHeight",e]),c.push(["sessionId",a]),c.push(["signature",r]),c.push(["thirdparties",u]),c.push(["id",o]),s&&c.push(["messageSuggestion",B.f(s)]),f.call(this,c)||this}return tt(t,f),t}(B.a),rt="___talkjs_image_popup";var ot=i(152),st=function(t,n){if(i=t,isNaN(parseFloat(i))||!isFinite(i))throw new Error("[TalkJS][HtmlPanel] "+(n||"value")+" must be a number.");var i;return Number(t)},ut=function(){function t(t,n){if(this.gt=!1,this.panelLoaded=Object(B.c)(),this.Tt=Object(B.c)(),this.It=Object(B.c)(),!n.url)throw new Error("[TalkJS] URL is required for the `HTMLPanel`.");var i=n.url,e=n.show,r=void 0===e||e,o=n.height,s=void 0===o?100:o,u=n.conversation,a=document.createElement("a");a.href=i,this.mt={url:a.href,show:r,height:st(s,"height"),conversation:"object"==typeof u?u.id:u},this.wt=t,this.DOMContentLoadedPromise=this.Tt.promise,this.windowLoadedPromise=this.It.promise}return t.prototype.show=function(){this._(),!1===this.mt.show&&(this.mt.show=!0,this.yt())},t.prototype.hide=function(){this._(),!0===this.mt.show&&(this.mt.show=!1,this.yt())},t.prototype.setHeight=function(t){this._(),this.mt.height=st(t,"height"),this.yt()},t.prototype.isVisible=function(){return this._(),!this.gt&&!0===this.mt.show},t.prototype._=function(){if(this.wt._(),this.gt)throw new Error("[TalkJS] This HTML Panel has been destroyed, and you cannot use it anymore. Please create a new HTML Panel.")},t.prototype.destroy=function(){return this.mt.show=!1,this.mt.url="",this.gt=!0,this.yt()},t.prototype.Nt=function(){var e=this,r=Object(h.a)(this.mt.url,this.wt.sessionId,this.mt.conversation);return Object(B.j)("__talkjs:htmlPanelLoaded_"+r,function(){e.panelLoaded.resolve(void 0)}),this.yt().then(function(){return e.panelLoaded.promise.then(function(){var t=e.Mt(r);if(!t)throw new Error("[TalkJS][HtmlPanel]: Couldn't get a reference to the window property of the HTML panel iframe.");e.window=t;try{e.window.scrollBy(0,0)}catch(t){return void console.warn("[TalkJS] HTML Panel on url "+e.mt.url+" is not on the same origin as the current page, functionality may be limited. DOMContentLoadedPromise and windowLoadedPromise will never resolve. See https://talkjs.com/docs/Features/Customizations/HTML_Panels.html#page_HTML-Panel-Limitations for more information.")}var n=function(t,n){n.resolve(void 0)},i=function(){return e.window.addEventListener("load",function(){return n(0,e.It)},!0)};"loading"===e.window.document.readyState?(e.window.document.addEventListener("DOMContentLoaded",function(){return n(0,e.Tt)},!0),i()):"complete"===e.window.document.readyState?(n(0,e.Tt),n(0,e.It)):(n(0,e.Tt),i())})})},t.prototype.yt=function(){var t=this;return this.wt.contentLoaded().then(function(){return t.wt.Et()})},t.prototype.Mt=function(t){var n=this.jt();return null!==n?n.frames[t]:null},t.prototype.jt=function(){var t=this.wt.kt();return t||null},t}(),at=function(){function t(t){this.wt=t}return t.prototype.focus=function(){this.wt._();var t=this.wt.St;if(!t||t.isZombie())throw new Error("[TalkJS] Cannot focus the message field on an unmounted UI.");t.request("focusEntryBox",[])},t.prototype.setText=function(t){this.wt._(),this.wt.setEntryBoxText(t)},t}(),ct=i(44);function ft(){var t=Object(ot.a)(),n=t.width,i=t.height;return n<420||i<420?a.Popover:a.Widget}var ht=function(){function t(t,n,i,e){var r=void 0===n?{}:n,o=r.selectedConversation,s=r.hideHub,u=void 0!==s&&s,h=this;this.Dt={perConv:Object.create(null)},this._t=!1,this.At=B.c(),this.x=new F(["sendMessage","focus","blur"]),this.sessionId=B.m(),this.messageField=new at(this),this.onUIBoxFocusChange=function(t){var n=t.focused;h.x.emit(n?"focus":"blur",{})},this.onSendMessage=function(t){var n=t.meId,i=t.conversationId,a=t.text,c=t.attachment,f=t.location,e=h.Ct({id:n}),r=h.D.Pt.W(i);return U.a.all([e,r]).then(function(t){var n=t[0],i=t[1],e={id:void 0,conversationId:i.id,type:"UserMessage",readBy:[],senderId:n.id,text:a,origin:"web",attachment:c,location:f,createdAt:void 0},r={text:a,custom:{}},o=0,s=!1,u={me:n,message:e,conversation:i,override:function(t){var n=t.text,i=t.custom;if(1<(o+=1))throw new Error("[TalkJS] Cannot call SendMessageEvent.override more than once");if(s)throw new Error("[TalkJS] Cannot call SendMessageEvent.override asynchronously");n&&(r.text=n),i&&(r.custom=i)}};return h.x.emit("sendMessage",u),s=!0,r}).catch(function(t){return console.error(t)})},this.onShowMoreChats=function(t){var n=t.amount;h.D.Pt.G({amount:n})},this.D=t,this.zt=new V(function(){if(h.St)return h.St.contentWindow()});var a=e.dir;!a&&document.documentElement.dir&&"auto"!==document.documentElement.dir&&(a=document.documentElement.dir),this.xt={hideHub:u,dir:a},this.boxType=i,this.mt=e,this.select(o)}return t.prototype.contentLoaded=function(){return this.At.promise},t.prototype.select=function(t,n){this._(),n&&n.messageSuggestion&&(this.mt.messageSuggestion=n.messageSuggestion);var i=this.mt,e=this.mt,r=this.mt;if(i.messageSuggestion&&this.boxType===u.Inbox&&!t&&(console.warn("[TalkJS]","Message suggestions require you to have a selected conversation for the Inbox layout."),i.messageSuggestion=void 0),this.Lt={desktopNotify:L(),dir:this.xt.dir,htmlPanelOptions:this.Rt(),feedFilter:void 0===e.feedFilter?{}:e.feedFilter,theme:i.theme,messageFilter:void 0===e.messageFilter?{}:e.messageFilter,useBrowserHistory:void 0===e.useBrowserHistory||e.useBrowserHistory,view:{mode:this.getMode(),hideHub:this.xt.hideHub||!1,isInsideMobileApp:B.h(),showChatHeader:void 0===i.showChatHeader||i.showChatHeader,showFeedHeader:void 0===e.showFeedHeader||e.showFeedHeader,chatTitleMode:void 0===i.chatTitleMode?"participants":i.chatTitleMode,chatSubtitleMode:void 0===i.chatSubtitleMode?"subject":null===i.chatSubtitleMode?"none":i.chatSubtitleMode,feedConversationTitleMode:void 0===e.feedConversationTitleMode?"auto":e.feedConversationTitleMode,showCloseInHeader:void 0===r.showCloseInHeader?"auto":r.showCloseInHeader}},this.Ft=this.Ut(t),this.Bt=this.Yt(t),this.St){var o={messageSuggestion:i.messageSuggestion,localSettings:this.Lt};this.St.nav(this.Bt,this.Ft,o)}},t.prototype.setEntryBoxText=function(t){return this.St.patchQueryString({messageSuggestion:t})},t.prototype.createHtmlPanel=function(t){this._();var n=new ut(this,t),i=t.conversation;i?this.Dt.perConv["object"==typeof i?i.id:i]=n:this.Dt.global=n;var e=n.Nt();return this.Et(),e.then(function(){return n})},t.prototype.on=function(t,n){this._(),this.x.on(t,n)},t.prototype.off=function(t,n){this.x.off(t,n)},t.prototype.Jt=function(t,n){return B.k(this.mt,t),this.Kt(n)},t.prototype.Kt=function(t){var n=this;return B.k(this.Lt,t),this.contentLoaded().then(function(){return n.St.patchLocalSettings(t)})},t.prototype.setPresence=function(t){var n=void 0===t?{}:t,i=n.visible,e=n.custom;this._(),Object(w.c)(i,["undefined","boolean"],"UIBox.setPresence: field visible has to be boolean."),e&&Object(w.d)(e,["string"],function(t){return'UIBox.setPresence: Field "custom.'+t+'" must be a string.'}),this.St.request("setPresence",[{custom:e,visible:i}])},t.prototype.Ht=function(t){return this.x.supports(t)},t.prototype.kt=function(){return this.St?this.St.contentWindow():null},t.prototype.Ut=function(t){var n=this,i={me:this.D.me};return"object"==typeof t&&null!==t&&(i.others=t.participants.filter(function(t){return t.user.id!==n.D.me.id}).map(function(t){return t.user}),i.conversation={internalId:t.internalId,id:t.id,participants:t.participants,subject:t.subject,custom:t.custom,welcomeMessages:t.welcomeMessages,photoUrl:t.photoUrl,topicId:t instanceof p?t.topicId:void 0}),i},t.prototype.Yt=function(t){return"object"==typeof t?null===t?"inbox/chats/hubOnly":"inbox/"+t.internalId:"string"==typeof t?"inbox/"+l(t):"inbox/chats"},t.prototype._=function(){if(this.D._(),this._t)throw new Error("[TalkJS] This UI object has been destroyed, and you cannot use it anymore. This object has been deleted before (either by calling destroy(), by a user closing the popup, or by external code removing the TalkJS Iframe from the DOM), and is now in an invalid state. Please call createInbox, createChatbox or createPopup again.")},t.prototype.Qt=function(t){var n=this;this._();var i=t,e=i&&i.jquery&&i.length?i[0]:t;if(this.St)throw new Error("[TalkJS] Cannot mount UI more than once. Please call createInbox, createChatbox or createPopup again if you want to create a new UI.");if(!e)throw new Error("[TalkJS] Cannot mount UI: container element not found");if(!this.Bt)throw new Error("[TalkJS] Internal Error: cannot mount UI without URL");var r=this.D.legacyThemePath;return r?B.e("GET",r).then(function(t){return n.Lt.theme=t.replace(/\/\*[^@]+?\*\//gm,"")}).then(function(){return n.mountIframe(e)}).then(function(){return n.At.promise}):(this.mountIframe(e),this.At.promise)},t.prototype.Rt=function(){var t=function(t){return{show:t.show,url:t.url,height:t.height}},n=this.Dt,i=n.global,e=n.perConv,r={perConv:{}};for(var o in i&&(r.global=t(i.mt)),e)r.perConv[o]=t(e[o].mt);return r},t.prototype.Et=function(){this.Kt({htmlPanelOptions:this.Rt()})},t.prototype.mountIframe=function(n){var i=this,t=Object(ot.a)().height,e={dbSyncData:this.Ft,localSettings:this.Lt,clientHeight:t,sessionId:this.sessionId,thirdparties:this.mt.thirdparties,externalUserId:this.D.me.id,signature:this.D.signature,messageSuggestion:this.mt.messageSuggestion};if(this.St=new it(this.D.appId,this.D.me.internalId,this.D.Gt,this.Bt,e),this.Wt(),this.zt.listen(this.St,this.onShowImagePopup,"showImagePopup"),this.zt.listen(this.St,this.onGetCurrentLocation,"getCurrentLocation"),this.zt.listen(this.St,this.onOpenExternalLink,"openExternalLink"),this.zt.listen(this.St,this.onShowMoreChats,"showMoreChats"),this.zt.listen(this.St,this.onSendMessage,"sendMessage"),this.zt.listen(this.St,this.onUIBoxFocusChange,"uiBoxFocusChange"),this.zt.listen(this.St,this.onHasParentFocus,"hasParentFocus"),"full"===this.Lt.view.mode){var r=void 0;if(this.D.Zt(Dt)){var o=function(t){var n=document.createElement("div");lt(t,n);var i=t.style.boxSizing;t.style.boxSizing="content-box";var e=parseInt(getComputedStyle(t).height);return t.style.boxSizing=i,lt(n,t),1<e}(n);r=function(t){t.width="100%",i.$t(n,t,o),t.marginLeft="auto",t.marginRight="auto",t.visibility="visible","ti8AJFWH"!==i.D.appId&&"LfC1CcQC"!==i.D.appId&&(t.minHeight="500px")}}else r=function(t){t.width="100%",t.height="100%",t.marginLeft="auto",t.marginRight="auto",t.visibility="visible"};this.St.mount(n,r)}else this.St.mount(n,function(t){t.width=t.height="0",t.minWidth=t.maxWidth=t.minHeight=t.maxHeight="100%",t.visibility="visible"})},t.prototype.$t=function(t,n,i){if(i)n.height="100%";else{var e=t.getBoundingClientRect().top+window.pageYOffset,r=window.innerHeight,o=r-e;if(1010<=window.innerWidth){var s=getComputedStyle(t);o-=parseInt(s.paddingTop)+parseInt(s.paddingBottom)||10}n.height=500<o?Math.round(o)+"px":Math.round(.75*r)+"px"}},t.prototype.Wt=function(){var t=this;B.j("__talkjs:hello",function(){t.St.cleanupContainer(),t.At.resolve(void 0)})},t.prototype.onShowImagePopup=function(t){!function(t){var n=document.getElementById(rt);n&&n.parentNode.removeChild(n);var i,e=Math.min(window.innerWidth,window.innerHeight)<500?"padding: 0; max-width: 100%; max-height: 100%":"padding: 5px; background: #fff; max-width: 95%; max-height: 95%",r=document.createElement("div");r.innerHTML='<div id="'+rt+'" style="box-sizing: border-box; padding: 0; background-color: rgba(0,0,0,0.85); opacity: 0; transition: opacity 0.2s ease-out; overflow: hidden; position: fixed; z-index: 54321; left: 0; top: 0; right: 0; bottom: 0">\n        <img src="'+t+'" style="'+e+'; opacity: 0; transition: opacity 0.1s ease-out; margin: auto; position: absolute; top: 0; bottom: 0; right: 0; left: 0">\n        <span style="cursor: pointer; color: #fff; font: 4vmin sans-serif; position: absolute; right: 0px; top: 0px; padding: 10px">⨯</a>\n    </div>';var o=function(t){t.preventDefault(),s.parentNode.removeChild(s),document.body.removeEventListener("keydown",i)};i=function(t){return 27===t.keyCode&&o(t)};var s=r.firstChild;s.addEventListener("click",o),document.body.addEventListener("keydown",i);var u=window.requestAnimationFrame||function(t){return setTimeout(t,20)};u(function(){return u(function(){return s.style.opacity="1"})}),s.getElementsByTagName("img")[0].onload=function(t){return t.target.style.opacity="1"},document.body.appendChild(s),window.focus()}(t.url)},t.prototype.Ct=function(n){return this.D.A.then(function(t){return t.getNym(n.id)}).then(c)},t.prototype.onGetCurrentLocation=function(t){return new U.a(function(n,i){navigator.geolocation.getCurrentPosition(function(t){return n([t.coords.latitude,t.coords.longitude])},function(t){return i(t.message)})})},t.prototype.onOpenExternalLink=function(t){var n=t.url;window.open(n,"_system","location=yes")},t.prototype.onHasParentFocus=function(){return document.hasFocus()},t.prototype.toggleDesktopNotifications=function(t){return this.D.setDesktopNotificationEnabled(t)},t.prototype.qt=function(t){return this.Kt({desktopNotify:t})},t.prototype.destroy=function(){this.zt.unlisten(this.onShowImagePopup,this.onSendMessage),this.zt.destroy(),this.D.forgetUIBox(this),this.x.removeAllListeners(),this.St&&this.St.destroy(),this._t=!0},t.prototype.isZombie=function(){return!this.St||this.St&&this.St.isZombie()},t.prototype.onWindowVisibleChanged=function(t){this.isZombie()||this.St.request("windowVisibleChanged",[t])},t.prototype.getMode=function(){if(this.boxType!==u.Popup)return"full";if(ft()===a.Widget)return"widget";if(ft()===a.Popover)return"popover";throw new Error("[TalkJS]: Unknown mode.")},t.prototype.setMessageFilter=function(t){this._(),Object(ct.d)("filter",t),this.Jt({messageFilter:t},{messageFilter:t})},t}();function lt(t,n){for(;t.hasChildNodes();)n.appendChild(t.firstChild)}var dt,vt,Ot=(dt=function(t,n){return(dt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])})(t,n)},function(t,n){function i(){this.constructor=t}dt(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}),pt=function(e){function t(t,n,i){void 0===n&&(n={});var o=e.call(this,t,n,u.Inbox,i)||this;return o.Xt=new F(["conversationSelected","desktopNotificationToggled"]),o.onConversationSelected=function(n){var t=c(n.me);if(null!==n.conversation){var i,e={custom:(i=n.conversation).custom,id:i.externalId,photoUrl:i.photoUrl,subject:i.subject,topicId:i.topicId,welcomeMessages:i.welcomeMessages},r=n.others.filter(function(t){return!0===n.conversation.participants[t.id].canRead}).map(c);o.Xt.emit("conversationSelected",{me:t,conversation:e,other:r[0],others:r,conversationId:n.conversation.id})}else o.Xt.emit("conversationSelected",{me:t,conversation:null,conversationId:null})},o.onDesktopNotifyChange=function(t){var n=t.isEnabled,i=t.appName;x(n,{locale:o.D.Vt,alertOnFailure:!0,appName:i}).then(function(){o.Xt.emit("desktopNotificationToggled",{isEnabled:n})},function(){o.D.setDesktopNotificationEnabled(!1)})},o}return Ot(t,e),t.prototype.mount=function(t){var n=this;return e.prototype.Qt.call(this,t).then(function(){n.zt.listen(n.St,n.onConversationSelected,"selectedConversationChanged"),n.zt.listen(n.St,n.onDesktopNotifyChange,"desktopNotifyChanged")})},t.prototype.setFeedFilter=function(t){Object(ct.c)("filter",t),this.Jt({feedFilter:t},{feedFilter:t})},t.prototype.on=function(t,n){this._(),e.prototype.Ht.call(this,t)?e.prototype.on.call(this,t,n):this.Xt.on(t,n)},t.prototype.off=function(t,n){e.prototype.Ht.call(this,t)?e.prototype.off.call(this,t,n):this.Xt.off(t,n)},t.prototype.destroy=function(){this.zt.unlisten(this.onConversationSelected,this.onDesktopNotifyChange),e.prototype.destroy.call(this),this.Xt.removeAllListeners()},t}(ht),bt=(vt=function(t,n){return(vt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])})(t,n)},function(t,n){function i(){this.constructor=t}vt(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}),gt=i(559).replace("CLOSE",i(560)).replace("OPEN",i(561)),Tt=function(s){function t(t,n,i){var e=s.call(this,t,{hideHub:!0,selectedConversation:n},u.Popup,i)||this;return e.conversation=n,e.tn=i,e.nn=new F(["close","open"]),e.in=!1,e.rn=function(){if(e._t)throw new Error("[TalkJS] Can't hide a popup that's been destroyed. Please create and mount a new one.");var t=e.sn();e.un(t),e.nn.emit("close",{})},e}return bt(t,s),t.prototype.select=function(t,n){this.conversation=t,s.prototype.select.call(this,t,n)},t.prototype.mount=function(t){var n=this,i=(void 0===t?{show:!0}:t).show,e=this.an(i),r=e[0],o=e[1];return document.body.insertBefore(r,document.body.firstChild),s.prototype.Qt.call(this,o).then(function(){n.zt.listen(n.St,n.rn,"closePopover"),i?n.cn(e):n.setPresence({visible:!1})})},t.prototype.destroy=function(){var t=this.sn()[0];t?(document.body.removeChild(t),this.restorePageHeight(),this.forgetMe(),this.zt.unlisten(this.rn),this.D.forgetUIBox(this),s.prototype.destroy.call(this)):console.warn("[TalkJS]","Could not call `destroy` on a non-existing element.")},t.prototype.show=function(){this._();var t=this.sn();this.cn(t)},t.prototype.hide=function(){this._();var t=this.sn();this.un(t)},t.prototype.on=function(t,n){this._(),s.prototype.Ht.call(this,t)?s.prototype.on.call(this,t,n):this.nn.on(t,n)},t.prototype.off=function(t,n){s.prototype.off.call(this,t,n),this.nn.off(t,n)},t.prototype.sn=function(){var t=document.getElementById("__talkjs_popup_container_"+this.sessionId);if(!t){throw Error("[TalkJS] Unexpected error: Could not find popup container. Maybe something, other than TalkJS, removed it from the DOM?")}var n=t.getElementsByTagName("span")[0],i=t.getElementsByClassName("__talkjs_launcher")[0];return[t,n,i]},t.prototype.cn=function(t){for(var n=t[0],i=t[1],e=t[2],r=0,o=this.D.getUIBoxes(function(t){return t.boxType===u.Popup&&!t.isZombie()});r<o.length;r++){var s=o[r];this!==s&&s.hide()}i.style.display="",e&&(e.className=e.className.replace("closed","open"),e.style.display=""),n.style.display="",this.rememberMe(),ft()===a.Popover&&this.fixPageHeight(n),this.in=!0,this.setPresence({visible:!0}),this.messageField.focus()},t.prototype.un=function(t){var n=t[0],i=t[1],e=t[2];"always"===this.tn.launcher?(i.style.display="none",e&&(e.className=e.className.replace("open","closed"))):n.style.display="none",this.restorePageHeight(),this.forgetMe(),this.in=!1,this.setPresence({visible:!1})},t.prototype.an=function(t){var n=this,i=document.createElement("span"),e=document.createElement("style");e.type="text/css",e.appendChild(document.createTextNode(gt));var r,o=document.createElement("div");o.id="__talkjs_popup_container_"+this.sessionId,i.style.display="none",i.className="__talkjs_popup",o.appendChild(e),o.appendChild(i);var s=[o,i,void 0];return"never"!==this.tn.launcher&&(r=document.createElement("a"),(s[2]=r).href="#",r.className="__talkjs_launcher "+(t?"open":"closed"),(t||"close-only"===this.tn.launcher)&&(r.style.display="none"),r.id="__talkjs_launcher",r.addEventListener("click",function(t){t.preventDefault(),t.target.className.match(/open/)?(n.un(s),n.nn.emit("close",{})):(n.cn(s),n.nn.emit("open",{}))}),o.appendChild(r)),s},t.prototype.rememberMe=function(){if(this.tn.keepOpen){var t;t=this.conversation instanceof p||this.conversation instanceof o?this.conversation.id:this.conversation;var n=JSON.stringify({conversationId:t,options:this.tn});B.l(It(this.D.appId,this.D.me.id,"v2-"),n)}},t.prototype.fixPageHeight=function(t){var n=document.body,i=document.documentElement;this.fn={hn:n.style.overflow,ln:n.style.height,dn:n.style.width,vn:n.style.position,On:window.scrollY,pn:window.scrollX,bn:i.style.height,gn:i.style.overflow},t.style.top=t.style.left="0px",window.scrollTo(0,0),n.style.height=i.style.height="100%",n.style.width="100%",i.style.overflow=n.style.overflow="hidden",n.style.position="relative"},t.prototype.restorePageHeight=function(){if(this.fn){var t=document.body,n=document.documentElement;t.style.overflow=this.fn.hn,t.style.width=this.fn.dn,t.style.height=this.fn.ln,t.style.position=this.fn.vn,n.style.height=this.fn.bn,n.style.overflow=this.fn.gn,window.scrollTo(this.fn.pn,this.fn.On)}},t.prototype.forgetMe=function(){B.d(It(this.D.appId,this.D.me.internalId)),B.d(It(this.D.appId,this.D.me.id,"v2-"))},t}(ht);function It(t,n,i){return void 0===i&&(i=""),"talkjs-popup-"+i+n+"-"+t}var mt,wt,yt=(mt=function(t,n){return(mt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])})(t,n)},function(t,n){function i(){this.constructor=t}mt(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}),Nt=function(r){function t(t,n,i){var e=(void 0===n?{}:n).selectedConversation;return r.call(this,t,{hideHub:!0,selectedConversation:e},u.Chatbox,i)||this}return yt(t,r),t.prototype.mount=function(t){return r.prototype.Qt.call(this,t)},t.prototype.destroy=function(){r.prototype.destroy.call(this)},t}(ht),Mt=i(15);wt=i(562).default;var Et={};for(var jt in wt)Et[jt]=new Mt.a({values:wt[jt]});var kt=Et,St=function(){return(St=Object.assign||function(t){for(var n,i=1,e=arguments.length;i<e;i++)for(var r in n=arguments[i])Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}).apply(this,arguments)},Dt=1,_t=[[Dt],[]],At=function(){function d(t){var n,i,e,r,o,s,u,a=t.appId,c=t.me,f=t.signature,h=t.serverHostname,l=this;if(this.x=new F(["message"]),this.Tn=[],this.In=!0,this.w=Object(B.m)(),this.mn=_t[d.wn],!this.mn)throw new Error("[TalkJS] Unexpected error at TalkJS startup.");if(!(c instanceof O))throw new Error("[TalkJS] The `me` property in the Session#constructor has to be of type Talk.User. For example:\n\nvar user = new Talk.User(data);\nvar session = new Talk.Session({\n    me: user,\n    appId: ...\n})\n\nFor more information check our documentation https://talkjs.com/docs/api/classes/session.html#constructor");this.appId=Object(w.c)(a,["string"],"Session: required field 'appId' is not given, is not a string or it's empty.",[w.b,function(t){return"YOUR_APP_ID"!==t}]),this.me=Object(w.c)(c,["object"],"Session: required field 'me' is not given or not a Talk.User object"),this.signature=Object(w.c)(f,["string","undefined"],"Session: optional field 'signature' is not a string.",[w.b]),h&&(this.Gt=Object(w.c)(h,["string","undefined"],"Session: optional field 'serverHostname' is not a string.",[w.b])),this.Gt||(this.Gt=N),this.A=(n=this.appId,i=this.me,e=this.signature,r=this.Gt,o=this.w,s=new B.a([["signature",e]]),u="https://"+r+"/api/v0/"+n+"/bokens/"+i.id+"?"+s.toString(),Object(B.e)("GET",u).then(function(t){return JSON.parse(t)}).then(function(t){return new $(t.boken,i,n,r,t.appLocale,o)})),this.Pt=new K(this.A,function(t){return l.x.emit("message",t)},function(t){return l.yn(t)}),new H(this.A),this.Nn(),this.Mn(),this.Vt=Mt.a.decide(kt,"en",this.me.locale),this.A.then(function(n){return n.getNym(l.me.internalId).then(function(t){t.locale===l.me.locale&&null!==t.locale||(l.Vt=Mt.a.decide(kt,n.appLocale,t.locale))})})}return Object.defineProperty(d.prototype,"unreads",{get:function(){return this.Pt},enumerable:!0,configurable:!0}),d.prototype.hasValidCredentials=function(){return this._(),this.A.then(function(){return!0},function(){return!1})},d.prototype.Nn=function(){var t=B.g("talkjs-popup-"+this.me.internalId+"-"+this.appId),n=B.g("talkjs-popup-v2-"+this.me.id+"-"+this.appId);if(t||n){if(n){var i=JSON.parse(n),e=i.conversationId,r=i.options;this.createPopup(e,r).mount({show:!0})}if(t)this.createPopup(t).mount({show:!0})}},d.prototype.Mn=function(){var e=this,t=function(t){for(var n=0,i=e.Tn;n<i.length;n++){i[n].onWindowVisibleChanged(t)}};window.addEventListener("focus",function(){return t(!0)}),window.addEventListener("blur",function(){return t(!1)})},d.prototype.getOrStartConversation=function(t,n){var i=void 0===n?{}:n,e=i.participants,r=i.topicId,o=i.subject,s=i.custom,u=i.welcomeMessages,a=i.photoUrl;if(this._(),t instanceof O){var c=t,f=[this.me,c];return this.getOrStartConversation(b(this.me,c,r),{participants:f,topicId:r,subject:o,welcomeMessages:u,custom:s,photoUrl:a})}var h=t;Object(w.c)(h,["string"],"conversationId cannot be empty",[w.b]);var l=(e=e||[]).map(function(t){return new v(t)});return l=this.En(l,this.me),new p({conversationId:h,participants:l,topicId:r,subject:o,welcomeMessages:u,custom:s,photoUrl:a},this)},d.prototype.En=function(t,n){var i=this;return t.filter(function(t){return t.user.id===i.me.id})[0]?t:[new v(this.me)].concat(t)},d.prototype.getOrCreateConversation=function(t){return this._(),new o(t,this)},d.prototype.createInbox=function(t){void 0===t&&(t={}),this._(),t.feedFilter&&Object(ct.c)("feedFilter",t.feedFilter),t.messageFilter&&Object(ct.d)("feedFilter",t.messageFilter);var n=t.selected,i=new pt(this,{selectedConversation:n},t);return this.rememberUIBox(i),i},d.prototype.createChatbox=function(t,n){void 0===n&&(n={}),this._();var i=new Nt(this,{selectedConversation:t},n);return this.rememberUIBox(i),i},d.prototype.createPopup=function(t,n){this._();n=St({},{keepOpen:!0,launcher:"close-only"},n);var i=new Tt(this,t,n);return this.rememberUIBox(i),i},d.prototype.rememberUIBox=function(t){this.Tn.push(t)},d.prototype.syncThemeForLocalDev=function(t){this._(),B.i(this.appId)?console.warn("[TalkJS]: syncThemeForLocalDev does not work in live mode, please copy your theme to the TalkJS dashboard!"):this.legacyThemePath=t},d.prototype.loadLocalTheme=function(t){return Promise.resolve(void 0)},d.prototype.forgetUIBox=function(t){var n=this.Tn.indexOf(t);0<=n&&this.Tn.splice(n,1)},d.prototype.getUIBoxes=function(t){return this.Tn.filter(t)},d.prototype.setDesktopNotificationEnabled=function(t,n){var i=this,e=(void 0===n?{}:n).alertOnFailure,r=void 0===e||e;this._();var o=function(n){i.jn(),i.Tn.forEach(function(t){return t.qt(n)})};return x(t,{locale:this.Vt,alertOnFailure:r}).then(function(){return o(t)}).catch(function(t){throw o(!1),t})},d.prototype.jn=function(){this.Tn.filter(function(t){return t.isZombie()}).forEach(function(t){return t.destroy()})},d.prototype.registerDevice=function(t){var n=this,i=t.platform,e=t.pushRegistrationId;return this._(),i=Object(w.c)(i,["string"],'Session.registerDevice: Platform should be a string containing "ios" or "android" values.',[w.f]),e=Object(w.c)(e,["string"],"Session.registerDevice: Push registration id should be not empty string.",[w.b]),this.A.then(function(t){return t.put("/nyms/"+n.me.internalId+"/push_registration",{platform:i,pushRegistrationId:e})}).then(function(){}).catch(function(t){throw console.error("[TalkJS]","Cannot register this device. Please contact us to get more information."),t})},d.prototype.unregisterDevice=function(){var n=this;return this._(),this.A.then(function(t){return t.delete("/nyms/"+n.me.internalId+"/push_registration")}).then(function(){}).catch(function(t){throw console.error("[TalkJS]","Cannot unregister this device. Please contact us to get more information."),t})},d.prototype.yn=function(t){var n=this.getUIBoxes(function(t){return t.boxType===u.Inbox});1===n.length&&n[0].select(t)},d.prototype.on=function(t,n){this._(),this.x.on(t,n)},d.prototype.off=function(t,n){this.x.off(t,n)},d.prototype.destroy=function(){this.In=!1;for(var t=0,n=this.Tn;t<n.length;t++){n[t].destroy()}this.Pt.tt(),this.x.removeAllListeners(),this.A.then(function(t){return t.disconnect()})},d.prototype._=function(){if(!this.In)throw new Error("[TalkJS] The Talk.Session instance related to this operation has been destroyed, and it cannot be used anymore. Please create a new Session.")},d.prototype.kn=function(t){var n;return n=t,this.A.then(function(t){return t.post("/_t",n)})},d.prototype.Zt=function(t){return-1!==this.mn.indexOf(t)},d}();var Ct=window;if(Ct.Talk||(Ct.Talk={}),At.wn=Ct.Talk.v||0,Ct.Talk.User=O,Ct.Talk.Session=At,Ct.Talk.Error=j,Ct.Talk.oneOnOneId=function(t,n){return t instanceof O&&(t=t.id),n instanceof O&&(n=n.id),Object(s.a)(JSON.stringify([t,n].sort()))},Ct.onTalkLoaded&&Ct.onTalkLoaded(),Ct.onTalkUiLoaded&&Ct.onTalkUiLoaded(),Ct.Talk.ready){var Pt=U.a.resolve(),zt=Ct.Talk.ready;zt.c.forEach(function(t){var n=t[0],i=t[1],e=t[2];Pt.then(n).then(i).catch(e)}),zt.Sn=[],zt.then=Pt.then.bind(Pt),zt.catch=Pt.catch.bind(Pt)}},70:function(t,n,i){"use strict";var e=function(){var n=void 0;try{n=window.localStorage;var t="__storage_test__";return n.setItem(t,t),n.removeItem(t),!0}catch(t){return t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&n&&0!==n.length}return!1}(),r={};r.isSupported=e?(r.setItem=window.localStorage.setItem.bind(window.localStorage),r.getItem=window.localStorage.getItem.bind(window.localStorage),!0):(r.setItem=function(){},!(r.getItem=function(){return null})),r.set=function(t,n){return r.setItem(t,JSON.stringify(n))},r.get=function(t){return JSON.parse(r.getItem(t)||"null")},n.a=r},8:function(t,n,i){"use strict";function r(t,n,i,e){void 0===e&&(e=[]);var r=function t(n){if(null===n)return"null";var i=typeof n;if("object"!==i)return i;if(n instanceof Array)return n.length?t(n[0])+"[]":"[]";return i}(t);if(-1===n.indexOf(r))throw new Error("[TalkJS] "+i);for(var o=0,s=e;o<s.length;o++){if(!(0,s[o])(t))throw new Error("[TalkJS] "+i)}return t}function e(t,n,i){if(-1===n.indexOf(t))throw new Error("[TalkJS] "+i)}function o(t,n,i){for(var e in t)r(t[e],n,i(e))}function s(t){return""!==t}function u(t){return!t||/^[a-z]{1,3}(-.+)?$/.test(t)}function a(t){return!(["ios","android"].indexOf(t)<0)}i.d(n,"c",function(){return r}),i.d(n,"e",function(){return e}),i.d(n,"d",function(){return o}),i.d(n,"b",function(){return s}),i.d(n,"a",function(){return u}),i.d(n,"f",function(){return a})},82:function(jC,kC,lC){jC.exports=function(i){var e={};function r(t){if(e[t])return e[t].exports;var n=e[t]={i:t,l:!1,exports:{}};return i[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=i,r.c=e,r.d=function(t,n,i){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(n,t){if(1&t&&(n=r(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var e in n)r.d(i,e,function(t){return n[t]}.bind(null,e));return i},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="",r(r.s=0)}([function(n,t,i){(function(t){n.exports=t.Phoenix=i(2)}).call(this,i(1))},function(KC,LC){var MC;MC=function(){return this}();try{MC=MC||Function("return this")()||eval("this")}catch(KC){"object"==typeof window&&(MC=window)}KC.exports=MC},function(t,n,i){"use strict";function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function e(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function o(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}i.r(n),i.d(n,"Channel",function(){return b}),i.d(n,"Serializer",function(){return g}),i.d(n,"Socket",function(){return T}),i.d(n,"LongPoll",function(){return I}),i.d(n,"Ajax",function(){return m}),i.d(n,"Presence",function(){return w});var r="undefined"!=typeof self?self:null,a="undefined"!=typeof window?window:null,c=r||a||void 0,f={connecting:0,open:1,closing:2,closed:3},h={closed:"closed",errored:"errored",joined:"joined",joining:"joining",leaving:"leaving"},l={close:"phx_close",error:"phx_error",join:"phx_join",reply:"phx_reply",leave:"phx_leave"},d=[l.close,l.error,l.join,l.reply,l.leave],v={longpoll:"longpoll",websocket:"websocket"},O=function(t){return"function"==typeof t?t:function(){return t}},p=function(){function r(t,n,i,e){u(this,r),this.channel=t,this.event=n,this.payload=i||function(){return{}},this.receivedResp=null,this.timeout=e,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}return o(r,[{key:"resend",value:function(t){this.timeout=t,this.reset(),this.send()}},{key:"send",value:function(){this.hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload(),ref:this.ref,join_ref:this.channel.joinRef()}))}},{key:"receive",value:function(t,n){return this.hasReceived(t)&&n(this.receivedResp.response),this.recHooks.push({status:t,callback:n}),this}},{key:"reset",value:function(){this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1}},{key:"matchReceive",value:function(t){var n=t.status,i=t.response;t.ref,this.recHooks.filter(function(t){return t.status===n}).forEach(function(t){return t.callback(i)})}},{key:"cancelRefEvent",value:function(){this.refEvent&&this.channel.off(this.refEvent)}},{key:"cancelTimeout",value:function(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}},{key:"startTimeout",value:function(){var n=this;this.timeoutTimer&&this.cancelTimeout(),this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,function(t){n.cancelRefEvent(),n.cancelTimeout(),n.receivedResp=t,n.matchReceive(t)}),this.timeoutTimer=setTimeout(function(){n.trigger("timeout",{})},this.timeout)}},{key:"hasReceived",value:function(t){return this.receivedResp&&this.receivedResp.status===t}},{key:"trigger",value:function(t,n){this.channel.trigger(this.refEvent,{status:t,response:n})}}]),r}(),b=function(){function r(t,n,i){var e=this;u(this,r),this.state=h.closed,this.topic=t,this.params=O(n||{}),this.socket=i,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new p(this,l.join,this.params,this.timeout),this.pushBuffer=[],this.rejoinTimer=new y(function(){e.socket.isConnected()&&e.rejoin()},this.socket.rejoinAfterMs),this.socket.onError(function(){return e.rejoinTimer.reset()}),this.socket.onOpen(function(){e.rejoinTimer.reset(),e.isErrored()&&e.rejoin()}),this.joinPush.receive("ok",function(){e.state=h.joined,e.rejoinTimer.reset(),e.pushBuffer.forEach(function(t){return t.send()}),e.pushBuffer=[]}),this.joinPush.receive("error",function(){e.state=h.errored,e.socket.isConnected()&&e.rejoinTimer.scheduleTimeout()}),this.onClose(function(){e.rejoinTimer.reset(),e.socket.hasLogger()&&e.socket.log("channel","close ".concat(e.topic," ").concat(e.joinRef())),e.state=h.closed,e.socket.remove(e)}),this.onError(function(t){e.socket.hasLogger()&&e.socket.log("channel","error ".concat(e.topic),t),e.isJoining()&&e.joinPush.reset(),e.state=h.errored,e.socket.isConnected()&&e.rejoinTimer.scheduleTimeout()}),this.joinPush.receive("timeout",function(){e.socket.hasLogger()&&e.socket.log("channel","timeout ".concat(e.topic," (").concat(e.joinRef(),")"),e.joinPush.timeout),new p(e,l.leave,O({}),e.timeout).send(),e.state=h.errored,e.joinPush.reset(),e.socket.isConnected()&&e.rejoinTimer.scheduleTimeout()}),this.on(l.reply,function(t,n){e.trigger(e.replyEventName(n),t)})}return o(r,[{key:"join",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.timeout;if(this.joinedOnce)throw new Error("tried to join multiple times. 'join' can only be called a single time per channel instance");return this.timeout=t,this.joinedOnce=!0,this.rejoin(),this.joinPush}},{key:"onClose",value:function(t){this.on(l.close,t)}},{key:"onError",value:function(n){return this.on(l.error,function(t){return n(t)})}},{key:"on",value:function(t,n){var i=this.bindingRef++;return this.bindings.push({event:t,ref:i,callback:n}),i}},{key:"off",value:function(n,i){this.bindings=this.bindings.filter(function(t){return!(t.event===n&&(void 0===i||i===t.ref))})}},{key:"canPush",value:function(){return this.socket.isConnected()&&this.isJoined()}},{key:"push",value:function(t,n){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw new Error("tried to push '".concat(t,"' to '").concat(this.topic,"' before joining. Use channel.join() before pushing events"));var e=new p(this,t,function(){return n},i);return this.canPush()?e.send():(e.startTimeout(),this.pushBuffer.push(e)),e}},{key:"leave",value:function(){var t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.timeout;this.rejoinTimer.reset(),this.joinPush.cancelTimeout(),this.state=h.leaving;var i=function(){t.socket.hasLogger()&&t.socket.log("channel","leave ".concat(t.topic)),t.trigger(l.close,"leave")},e=new p(this,l.leave,O({}),n);return e.receive("ok",function(){return i()}).receive("timeout",function(){return i()}),e.send(),this.canPush()||e.trigger("ok",{}),e}},{key:"onMessage",value:function(t,n,i){return n}},{key:"isLifecycleEvent",value:function(t){return 0<=d.indexOf(t)}},{key:"isMember",value:function(t,n,i,e){return!(this.topic!==t||e&&e!==this.joinRef()&&this.isLifecycleEvent(n)&&(this.socket.hasLogger()&&this.socket.log("channel","dropping outdated message",{topic:t,event:n,payload:i,joinRef:e}),1))}},{key:"joinRef",value:function(){return this.joinPush.ref}},{key:"sendJoin",value:function(t){this.state=h.joining,this.joinPush.resend(t)}},{key:"rejoin",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.timeout;this.isLeaving()||this.sendJoin(t)}},{key:"trigger",value:function(t,n,i,e){var r=this.onMessage(t,n,i,e);if(n&&!r)throw new Error("channel onMessage callbacks must return the payload, modified or unmodified");for(var o=0;o<this.bindings.length;o++){var s=this.bindings[o];s.event===t&&s.callback(r,i,e||this.joinRef())}}},{key:"replyEventName",value:function(t){return"chan_reply_".concat(t)}},{key:"isClosed",value:function(){return this.state===h.closed}},{key:"isErrored",value:function(){return this.state===h.errored}},{key:"isJoined",value:function(){return this.state===h.joined}},{key:"isJoining",value:function(){return this.state===h.joining}},{key:"isLeaving",value:function(){return this.state===h.leaving}}]),r}(),g={encode:function(t,n){var i=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(i))},decode:function(t,n){var i,e,r=(i=JSON.parse(t),e=5,function(t){if(Array.isArray(t))return t}(i)||function(t,n){var i=[],e=!0,r=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(e=(s=u.next()).done)&&(i.push(s.value),!n||i.length!==n);e=!0);}catch(t){r=!0,o=t}finally{try{e||null==u.return||u.return()}finally{if(r)throw o}}return i}(i,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}());return n({join_ref:r[0],ref:r[1],topic:r[2],event:r[3],payload:r[4]})}},T=function(){function e(t){var n=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};u(this,e),this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=i.timeout||1e4,this.transport=i.transport||c.WebSocket||I,this.defaultEncoder=g.encode,this.defaultDecoder=g.decode,this.closeWasClean=!1,this.unloaded=!1,this.binaryType=i.binaryType||"arraybuffer",this.transport!==I?(this.encode=i.encode||this.defaultEncoder,this.decode=i.decode||this.defaultDecoder):(this.encode=this.defaultEncoder,this.decode=this.defaultDecoder),a&&a.addEventListener&&a.addEventListener("beforeunload",function(t){n.conn&&(n.unloaded=!0,n.abnormalClose("unloaded"))}),this.heartbeatIntervalMs=i.heartbeatIntervalMs||3e4,this.rejoinAfterMs=function(t){return i.rejoinAfterMs?i.rejoinAfterMs(t):[1e3,2e3,5e3][t-1]||1e4},this.reconnectAfterMs=function(t){return n.unloaded?100:i.reconnectAfterMs?i.reconnectAfterMs(t):[10,50,100,150,200,250,500,1e3,2e3][t-1]||5e3},this.logger=i.logger||null,this.longpollerTimeout=i.longpollerTimeout||2e4,this.params=O(i.params||{}),this.endPoint="".concat(t,"/").concat(v.websocket),this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new y(function(){n.teardown(function(){return n.connect()})},this.reconnectAfterMs)}return o(e,[{key:"protocol",value:function(){return location.protocol.match(/^https/)?"wss":"ws"}},{key:"endPointURL",value:function(){var t=m.appendParams(m.appendParams(this.endPoint,this.params()),{vsn:"2.0.0"});return"/"!==t.charAt(0)?t:"/"===t.charAt(1)?"".concat(this.protocol(),":").concat(t):"".concat(this.protocol(),"://").concat(location.host).concat(t)}},{key:"disconnect",value:function(t,n,i){this.closeWasClean=!0,this.reconnectTimer.reset(),this.teardown(t,n,i)}},{key:"connect",value:function(t){var n=this;t&&(console&&console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor"),this.params=O(t)),this.conn||(this.closeWasClean=!1,this.conn=new this.transport(this.endPointURL()),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=function(){return n.onConnOpen()},this.conn.onerror=function(t){return n.onConnError(t)},this.conn.onmessage=function(t){return n.onConnMessage(t)},this.conn.onclose=function(t){return n.onConnClose(t)})}},{key:"log",value:function(t,n,i){this.logger(t,n,i)}},{key:"hasLogger",value:function(){return null!==this.logger}},{key:"onOpen",value:function(t){this.stateChangeCallbacks.open.push(t)}},{key:"onClose",value:function(t){this.stateChangeCallbacks.close.push(t)}},{key:"onError",value:function(t){this.stateChangeCallbacks.error.push(t)}},{key:"onMessage",value:function(t){this.stateChangeCallbacks.message.push(t)}},{key:"onConnOpen",value:function(){this.hasLogger()&&this.log("transport","connected to ".concat(this.endPointURL())),this.unloaded=!1,this.closeWasClean=!1,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach(function(t){return t()})}},{key:"resetHeartbeat",value:function(){var t=this;this.conn&&this.conn.skipHeartbeat||(this.pendingHeartbeatRef=null,clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(function(){return t.sendHeartbeat()},this.heartbeatIntervalMs))}},{key:"teardown",value:function(t,n,i){this.conn&&(this.conn.onclose=function(){},n?this.conn.close(n,i||""):this.conn.close(),this.conn=null),t&&t()}},{key:"onConnClose",value:function(n){this.hasLogger()&&this.log("transport","close",n),this.triggerChanError(),clearInterval(this.heartbeatTimer),this.closeWasClean||this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(function(t){return t(n)})}},{key:"onConnError",value:function(n){this.hasLogger()&&this.log("transport",n),this.triggerChanError(),this.stateChangeCallbacks.error.forEach(function(t){return t(n)})}},{key:"triggerChanError",value:function(){this.channels.forEach(function(t){t.isErrored()||t.isLeaving()||t.isClosed()||t.trigger(l.error)})}},{key:"connectionState",value:function(){switch(this.conn&&this.conn.readyState){case f.connecting:return"connecting";case f.open:return"open";case f.closing:return"closing";default:return"closed"}}},{key:"isConnected",value:function(){return"open"===this.connectionState()}},{key:"remove",value:function(n){this.channels=this.channels.filter(function(t){return t.joinRef()!==n.joinRef()})}},{key:"channel",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=new b(t,n,this);return this.channels.push(i),i}},{key:"push",value:function(t){var n=this;if(this.hasLogger()){var i=t.topic,e=t.event,r=t.payload,o=t.ref,s=t.join_ref;this.log("push","".concat(i," ").concat(e," (").concat(s,", ").concat(o,")"),r)}this.isConnected()?this.encode(t,function(t){return n.conn.send(t)}):this.sendBuffer.push(function(){return n.encode(t,function(t){return n.conn.send(t)})})}},{key:"makeRef",value:function(){var t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}},{key:"sendHeartbeat",value:function(){if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.hasLogger()&&this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void this.abnormalClose("heartbeat timeout");this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef})}}},{key:"abnormalClose",value:function(t){this.closeWasClean=!1,this.conn.close(1e3,t)}},{key:"flushSendBuffer",value:function(){this.isConnected()&&0<this.sendBuffer.length&&(this.sendBuffer.forEach(function(t){return t()}),this.sendBuffer=[])}},{key:"onConnMessage",value:function(t){var c=this;this.decode(t.data,function(t){var n=t.topic,i=t.event,e=t.payload,r=t.ref,o=t.join_ref;r&&r===c.pendingHeartbeatRef&&(c.pendingHeartbeatRef=null),c.hasLogger()&&c.log("receive","".concat(e.status||""," ").concat(n," ").concat(i," ").concat(r&&"("+r+")"||""),e);for(var s=0;s<c.channels.length;s++){var u=c.channels[s];u.isMember(n,i,e,o)&&u.trigger(i,e,r,o)}for(var a=0;a<c.stateChangeCallbacks.message.length;a++)c.stateChangeCallbacks.message[a](t)})}}]),e}(),I=function(){function n(t){u(this,n),this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(t),this.readyState=f.connecting,this.poll()}return o(n,[{key:"normalizeEndpoint",value:function(t){return t.replace("ws://","http://").replace("wss://","https://").replace(new RegExp("(.*)/"+v.websocket),"$1/"+v.longpoll)}},{key:"endpointURL",value:function(){return m.appendParams(this.pollEndpoint,{token:this.token})}},{key:"closeAndRetry",value:function(){this.close(),this.readyState=f.connecting}},{key:"ontimeout",value:function(){this.onerror("timeout"),this.closeAndRetry()}},{key:"poll",value:function(){var r=this;this.readyState!==f.open&&this.readyState!==f.connecting||m.request("GET",this.endpointURL(),"application/json",null,this.timeout,this.ontimeout.bind(this),function(t){if(t){var n=t.status,i=t.token,e=t.messages;r.token=i}else n=0;switch(n){case 200:e.forEach(function(t){return r.onmessage({data:t})}),r.poll();break;case 204:r.poll();break;case 410:r.readyState=f.open,r.onopen(),r.poll();break;case 0:case 500:r.onerror(),r.closeAndRetry();break;default:throw new Error("unhandled poll status ".concat(n))}})}},{key:"send",value:function(t){var n=this;m.request("POST",this.endpointURL(),"application/json",t,this.timeout,this.onerror.bind(this,"timeout"),function(t){t&&200===t.status||(n.onerror(t&&t.status),n.closeAndRetry())})}},{key:"close",value:function(t,n){this.readyState=f.closed,this.onclose()}}]),n}(),m=function(){function t(){u(this,t)}return o(t,null,[{key:"request",value:function(t,n,i,e,r,o,s){if(c.XDomainRequest){var u=new XDomainRequest;this.xdomainRequest(u,t,n,e,r,o,s)}else{var a=c.XMLHttpRequest?new c.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");this.xhrRequest(a,t,n,i,e,r,o,s)}}},{key:"xdomainRequest",value:function(n,t,i,e,r,o,s){var u=this;n.timeout=r,n.open(t,i),n.onload=function(){var t=u.parseJSON(n.responseText);s&&s(t)},o&&(n.ontimeout=o),n.onprogress=function(){},n.send(e)}},{key:"xhrRequest",value:function(n,t,i,e,r,o,s,u){var a=this;n.open(t,i,!0),n.timeout=o,n.setRequestHeader("Content-Type",e),n.onerror=function(){u&&u(null)},n.onreadystatechange=function(){if(n.readyState===a.states.complete&&u){var t=a.parseJSON(n.responseText);u(t)}},s&&(n.ontimeout=s),n.send(r)}},{key:"parseJSON",value:function(n){if(!n||""===n)return null;try{return JSON.parse(n)}catch(t){return console&&console.log("failed to parse JSON response",n),null}}},{key:"serialize",value:function(t,n){var i=[];for(var e in t)if(t.hasOwnProperty(e)){var r=n?"".concat(n,"[").concat(e,"]"):e,o=t[e];"object"===s(o)?i.push(this.serialize(o,r)):i.push(encodeURIComponent(r)+"="+encodeURIComponent(o))}return i.join("&")}},{key:"appendParams",value:function(t,n){if(0===Object.keys(n).length)return t;var i=t.match(/\?/)?"&":"?";return"".concat(t).concat(i).concat(this.serialize(n))}}]),t}();m.states={complete:4};var w=function(){function s(t){var o=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};u(this,s);var i=n.events||{state:"presence_state",diff:"presence_diff"};this.state={},this.pendingDiffs=[],this.channel=t,this.joinRef=null,this.caller={onJoin:function(){},onLeave:function(){},onSync:function(){}},this.channel.on(i.state,function(t){var n=o.caller,i=n.onJoin,e=n.onLeave,r=n.onSync;o.joinRef=o.channel.joinRef(),o.state=s.syncState(o.state,t,i,e),o.pendingDiffs.forEach(function(t){o.state=s.syncDiff(o.state,t,i,e)}),o.pendingDiffs=[],r()}),this.channel.on(i.diff,function(t){var n=o.caller,i=n.onJoin,e=n.onLeave,r=n.onSync;o.inPendingSyncState()?o.pendingDiffs.push(t):(o.state=s.syncDiff(o.state,t,i,e),r())})}return o(s,[{key:"onJoin",value:function(t){this.caller.onJoin=t}},{key:"onLeave",value:function(t){this.caller.onLeave=t}},{key:"onSync",value:function(t){this.caller.onSync=t}},{key:"list",value:function(t){return s.list(this.state,t)}},{key:"inPendingSyncState",value:function(){return!this.joinRef||this.joinRef!==this.channel.joinRef()}}],[{key:"syncState",value:function(t,i,n,e){var u=this,a=this.clone(t),c={},f={};return this.map(a,function(t,n){i[t]||(f[t]=n)}),this.map(i,function(t,n){var i=a[t];if(i){var e=n.metas.map(function(t){return t.phx_ref}),r=i.metas.map(function(t){return t.phx_ref}),o=n.metas.filter(function(t){return r.indexOf(t.phx_ref)<0}),s=i.metas.filter(function(t){return e.indexOf(t.phx_ref)<0});0<o.length&&(c[t]=n,c[t].metas=o),0<s.length&&(f[t]=u.clone(i),f[t].metas=s)}else c[t]=n}),this.syncDiff(a,{joins:c,leaves:f},n,e)}},{key:"syncDiff",value:function(t,n,u,r){var i=n.joins,e=n.leaves,a=this.clone(t);return u||(u=function(){}),r||(r=function(){}),this.map(i,function(t,n){var i,e=a[t];if(a[t]=n,e){var r,o=a[t].metas.map(function(t){return t.phx_ref}),s=e.metas.filter(function(t){return o.indexOf(t.phx_ref)<0});(r=a[t].metas).unshift.apply(r,function(t){if(Array.isArray(t)){for(var n=0,i=new Array(t.length);n<t.length;n++)i[n]=t[n];return i}}(i=s)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}())}u(t,e,n)}),this.map(e,function(t,n){var i=a[t];if(i){var e=n.metas.map(function(t){return t.phx_ref});i.metas=i.metas.filter(function(t){return e.indexOf(t.phx_ref)<0}),r(t,i,n),0===i.metas.length&&delete a[t]}}),a}},{key:"list",value:function(t,i){return i||(i=function(t,n){return n}),this.map(t,function(t,n){return i(t,n)})}},{key:"map",value:function(n,i){return Object.getOwnPropertyNames(n).map(function(t){return i(t,n[t])})}},{key:"clone",value:function(t){return JSON.parse(JSON.stringify(t))}}]),s}(),y=function(){function i(t,n){u(this,i),this.callback=t,this.timerCalc=n,this.timer=null,this.tries=0}return o(i,[{key:"reset",value:function(){this.tries=0,clearTimeout(this.timer)}},{key:"scheduleTimeout",value:function(){var t=this;clearTimeout(this.timer),this.timer=setTimeout(function(){t.tries=t.tries+1,t.callback()},this.timerCalc(this.tries+1))}}]),i}()}])}});
//# sourceMappingURL=talk-bundle-f7ae3d03874eb4b167c1.js.map